<!DOCTYPE html>
<html lang='en'>
<head>
	
	<style>
	
	   #container {width:100px;height:500px;border:1px #d1d1d1 solid;position:relative;}
        #drag {width:50px;height:50px;background:#369;position:absolute;left:25px;top:0;}
		#op {position:absolute;left:150px;top:0;}
		
	
.trans-scale1 {
    width: 100px;
    height:100px;
    margin:10px auto;
    background:#99F;

    transition-function: ease-in;
    transition-duration: 1000ms;
    -webkit-transition-function: ease-in;
    -webkit-transition-duration: 1000ms;
    -moztransition-function: ease-in;
    -moztransition-duration: 1000ms;
    -o-transition-function: ease-in;
    -o-transition-duration: 1000ms;
}
	
.trans-scale2 {
    width: 100px;
    height:100px;
    margin:10px auto;
    background:#99F;

    transition-function: ease-in;
    transition-duration: 1000ms;
    -webkit-transition-function: ease-in;
    -webkit-transition-duration: 1000ms;
    -moztransition-function: ease-in;
    -moztransition-duration: 1000ms;
    -o-transition-function: ease-in;
    -o-transition-duration: 1000ms;
}

.trans-scale1:hover {
    transform: scale(1.25, 1.25);
    -webkit-transform: scale(1.25, 1.25);
    -moz-transform: scale(1.25, 1.25);
    -o-transform: scale(1.25, 1.25);
}
.trans-scale2:hover {
    transform: scale(-1, -1);
    -webkit-transform: scale(-1, -1);
    -moz-transform: scale(-1.25, -1.25);
    -o-transform: scale(-1.25, -1.25);
}



	</style>
</head>
<body>
<div id="container">
<div id="drag">!!!click me !!!</div>

</div>
<div id="op">
<p >
缓动函数类型：
<input type='radio' onclick="changeCheck('Linear')" name="Tween" value="Linear"/>Linear
<input type="radio" onclick="changeCheck('Quad')" name="Tween" value="Quad" /> Quad
<input type="radio" onclick="changeCheck('Cubic')" name="Tween" value="Cubic" /> Cubic
<input type="radio" onclick="changeCheck('Quart')" name="Tween" value="Quart" /> Quart
<input type="radio" onclick="changeCheck('Quint')" name="Tween" value="Quint" /> Quint
<input type="radio" onclick="changeCheck('Sine')" name="Tween" value="Sine" /> Sine
<input type="radio" onclick="changeCheck('Expo')" name="Tween" value="Expo" /> Expo
<input type="radio" onclick="changeCheck('Circ')" name="Tween" value="Circ" /> Circ
<input type="radio" onclick="changeCheck('Elastic')" name="Tween" value="Elastic" /> Elastic
<input type="radio" onclick="changeCheck('Back')" name="Tween" value="Back" /> Back
<input type="radio" onclick="changeCheck('Bounce')" name="Tween" value="Bounce" /> Bounce

</p>
<p >
缓动函数子类型：
<input type="radio" onclick="changeCheck(null,'easeIn')" name="easeInOut" value="easeIn" /> easeIn
<input type="radio" onclick="changeCheck(null,'easeOut')" name="easeInOut" value="easeOut" /> easeOut
<input type="radio" onclick="changeCheck(null,'easeInOut')" name="easeInOut" value="easeInOut" /> easeInOut
</p>

<p>
方向：
<input type="radio" onclick="changeCheck(null,null,'up')" name="updown" value="up" /> up
<input type="radio" onclick="changeCheck(null,null,'down')" name="updown" value="down" /> down
</p>

<p>
速度：
快<input type="range" onchange="changeCheck()" id="range_speed" value="30" min="0" max="1000"/> 慢


</p>

<p>
放大倍数<input type="number" onchange="changeCheck()" id="number" value="3" min="1" max="10"/> 


</p>


</div>

<script type='text/javascript'>
var Tween = {
 Linear: function(t,b,c,d){ return c*t/d + b; },
 Quad: {
  easeIn: function(t,b,c,d){
   return c*(t/=d)*t + b;
  },
  easeOut: function(t,b,c,d){
   return -c *(t/=d)*(t-2) + b;
  },
  easeInOut: function(t,b,c,d){
   if ((t/=d/2) < 1) return c/2*t*t + b;
   return -c/2 * ((--t)*(t-2) - 1) + b;
  }
 },
 Cubic: {
  easeIn: function(t,b,c,d){
   return c*(t/=d)*t*t + b;
  },
  easeOut: function(t,b,c,d){
   return c*((t=t/d-1)*t*t + 1) + b;
  },
  easeInOut: function(t,b,c,d){
   if ((t/=d/2) < 1) return c/2*t*t*t + b;
   return c/2*((t-=2)*t*t + 2) + b;
  }
 },
 Quart: {
  easeIn: function(t,b,c,d){
   return c*(t/=d)*t*t*t + b;
  },
  easeOut: function(t,b,c,d){
   return -c * ((t=t/d-1)*t*t*t - 1) + b;
  },
  easeInOut: function(t,b,c,d){
   if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
   return -c/2 * ((t-=2)*t*t*t - 2) + b;
  }
 },
 Quint: {
  easeIn: function(t,b,c,d){
   return c*(t/=d)*t*t*t*t + b;
  },
  easeOut: function(t,b,c,d){
   return c*((t=t/d-1)*t*t*t*t + 1) + b;
  },
  easeInOut: function(t,b,c,d){
   if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
   return c/2*((t-=2)*t*t*t*t + 2) + b;
  }
 },
 Sine: {
  easeIn: function(t,b,c,d){
   return -c * Math.cos(t/d * (Math.PI/2)) + c + b;
  },
  easeOut: function(t,b,c,d){
   return c * Math.sin(t/d * (Math.PI/2)) + b;
  },
  easeInOut: function(t,b,c,d){
   return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
  }
 },
 Expo: {
  easeIn: function(t,b,c,d){
   return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;
  },
  easeOut: function(t,b,c,d){
   return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
  },
  easeInOut: function(t,b,c,d){
   if (t==0) return b;
   if (t==d) return b+c;
   if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;
   return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;
  }
 },
 Circ: {
  easeIn: function(t,b,c,d){
   return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
  },
  easeOut: function(t,b,c,d){
   return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
  },
  easeInOut: function(t,b,c,d){
   if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
   return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
  }
 },
 Elastic: {
  easeIn: function(t,b,c,d,a,p){
   if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
   if (!a || a < Math.abs(c)) { a=c; var s=p/4; }
   else var s = p/(2*Math.PI) * Math.asin (c/a);
   return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
  },
 
  easeOut: function(t,b,c,d,a,p){
   if (t==0) return b; 
   if ((t/=d)==1) return b+c; 
   if (!p) p=d*.3;
   if (!a || a < Math.abs(c)) { a=c; var s=p/4; }
   else var s = p/(2*Math.PI) * Math.asin (c/a);
   return (a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b);
  },
  easeInOut: function(t,b,c,d,a,p){
   if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
   if (!a || a < Math.abs(c)) { a=c; var s=p/4; }
   else var s = p/(2*Math.PI) * Math.asin (c/a);
   if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
   return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
  }
 },
 Back: {
  easeIn: function(t,b,c,d,s){
   if (s == undefined) s = 1.70158;
   return c*(t/=d)*t*((s+1)*t - s) + b;
  },

  easeOut: function(t,b,c,d,s){
   if (s == undefined) s = 1.70158;
   return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
  },
  easeInOut: function(t,b,c,d,s){
   if (s == undefined) s = 1.70158;
   if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
   return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
  }
 },
 Bounce: {
  easeIn: function(t,b,c,d){
   return c - Tween.Bounce.easeOut(d-t, 0, c, d) + b;
  },
  easeOut: function(t,b,c,d){
   if ((t/=d) < (1/2.75)) {
    return c*(7.5625*t*t) + b;
   } else if (t < (2/2.75)) {
    return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
   } else if (t < (2.5/2.75)) {
    return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
   } else {
    return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
   }
  },
  
  easeInOut: function(t,b,c,d){
   if (t < d/2) return Tween.Bounce.easeIn(t*2, 0, c, d) * .5 + b;
   else return Tween.Bounce.easeOut(t*2-d, 0, c, d) * .5 + c*.5 + b;
  }
 }
} 

//Linear：线性匀速运动效果；
//Quadratic：二次方的缓动（t^2）；
//Cubic：三次方的缓动（t^3）；
//Quartic：四次方的缓动（t^4）；
//Quintic：五次方的缓动（t^5）；
//Sinusoidal：正弦曲线的缓动（sin(t)）；
//Exponential：指数曲线的缓动（2^t）；
//Circular：圆形曲线的缓动（sqrt(1-t^2)）；
//Elastic：指数衰减的正弦曲线缓动；
//Back：超过范围的三次方缓动（(s+1)*t^3 – s*t^2）；
//Bounce：指数衰减的反弹缓动。
//方向，速度，是否放大，放大位置（上部，中间，下部），放大比例，放大缩小缓动函数
//easeIn：从0开始加速的缓动，也就是先慢后快；
//easeOut：减速到0的缓动，也就是先快后慢；
//easeInOut：前半段从0开始加速，后半段减速到0的缓动
//参数说明：
//t：当前时间
//b：初始值
//c：变化量
//d：持续时间
//a:
//p:
//s:
var timer = null;
var kind = 'Linear';
var type = null;
var direction = null;
var topValue = 0;
var text = function(){};
var drag = document.getElementById('drag');
var t=0,b=0,c=400,d=300;
function changeCheck (x,y,z) {
	var num = document.getElementById('number')

	var speed = document.getElementById('range_speed')
	b=0,c=400,d=300,t=0;
	var speedvalue= speed && speed.value ? speed.value: 100;
	d = 500 * (speedvalue/1000)
	kind = x || kind;
	type = y || type;
	direction = z || direction;
	b = direction === 'up'? -400: 0
	text = Tween[kind][type] ? Tween[kind][type] : Tween[kind]['easeInOut']||Tween[kind];


}

	function render () {
		if (direction === 'up') {
			topValue = -Math.ceil(text(t,b,c,d))
		} else {
			topValue = Math.ceil(text(t,b,c,d))
		}
		console.info(t,b,c,d,topValue)
		drag.style.top = topValue + "px";
		
	}
	

window.requestAnimFrame = (function() {
	  return (
		window.requestAnimationFrame ||
		window.webkitRequestAnimationFrame ||
		window.mozRequestAnimationFrame ||
		window.oRequestAnimationFrame ||
		window.msRequestAnimationFrame ||
		function(callback, element) {
		  window.setTimeout(callback, 1000 / 60)
		}
	  )
	})()
	
  ;(function animloop() {
	render()
	 //if(curTime>ani.endTime){//一次滚动执行结束
	//	curTime = 0//从头开始动画
	// }
	 if(t<d){
		t++;
	}else{
		t = 0
	}
	requestAnimationFrame(animloop)//递归完成动画
  })()

	</script>
	
	<div class="trans-scale1"></div>
		
	<div class="trans-scale2"></div>
</body>
</html>
