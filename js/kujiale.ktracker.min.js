var Ktracker = function() {
    "use strict";
    const e = {
        ajax: {
            performanceStartPrefix: "mark_xhr_start_",
            performanceEndPrefix: "mark_xhr_end_",
            measurePerformancePrefix: "measure_xhr_",
            errorName: "XHRError",
            errorMessage: "XMLHttpRequest Error"
        },
        fetch: {
            performanceStartPrefix: "mark_fetch_start_",
            performanceEndPrefix: "mark_fetch_end_",
            measurePerformancePrefix: "measure_fetch_",
            errorName: "FetchError",
            errorMessage: "Fetch Error"
        }
    }
      , t = "x-qh-hunter-trace-id"
      , r = "X-B3-TraceId"
      , n = "X-B3-SpanId";
    var o;
    !function(e) {
        e.NUMBER = "Number",
        e.STRING = "String",
        e.OBJECT = "Object",
        e.ARRAY = "Array",
        e.ERROR = "Error",
        e.DATE = "Date",
        e.EXCEPTION = "Exception",
        e.FUNC = "Function",
        e.UNDEFINED = "Undefined",
        e.INVALID_ERROR = "Script error.",
        e.REQUEST = "Request",
        e.SYMBOL = "Symbol"
    }(o || (o = {}));
    const i = ["actionstat.qunhequnhe.com", "actionstat.kujiale.com", "actionstat.coohom.com", "actiontrack.qunhequnhe.com", "actiontrack.kujiale.com", "actiontrack.coohom.com", "mc.qunhequnhe.com", "mc.kujiale.com", "mc.coohom.com", "api.growingio.com", "mixpanel.com", "qhtbdoss.kujiale.com", "qhyxpicoss.kujiale.com", "qhmtl-cos.kujiale.com", "qhsmodel.kujiale.com", "parammodelbuildoss.kujiale.com", "qhdecooss.kujiale.com", "qhdisplay-oss.kujiale.com", "spriteoss.kujiale.com", "sse.kujiale.com", "qhcmsoss.kujiale.com", "qhrenderdev.oss.aliyuncs.com", "qhyxpic.oss.aliyuncs.com", "qiyukf.com", "qiyukf.nosdn.127.net", "segment.io", "segment.com", "51.la", "google-analytics.com", "googletagmanager.com", "baidu.com", "ysf.nosdn.127.net", "at.alicdn.com", "js.hs-analytics.net", "facebook.net", "stats.g.doubleclick.net"]
      , a = [/\/m.pop$/, /\/ktracker.min.js$/, /\/kio(\.\d)+.prod.js$/, /gio.js$/, "/api/login/status", "/d/api/session"]
      , s = /\.(webp|bmp|png|jpg|jpeg|gif|svg|ico)$/i
      , c = ["null", "undefined"];
    var u;
    !function(e) {
        e.INPUTTRACE = "inputTrace",
        e.HTTPTRACE = "httpTrace",
        e.TOOLTRACE = "toolTrace",
        e.ROUTETRACE = "routeTrace",
        e.ERRORTRACE = "errorTrace"
    }(u || (u = {}));
    const l = ["popstate", "hashchange"]
      , f = ["pushState", "replaceState"]
      , d = "hunterid"
      , p = "date"
      , h = "UnknownError"
      , g = "UnknownMsg"
      , m = "https://mc.kujiale.com:8880"
      , y = "https://mc.coohom.com"
      , v = ["localhost", "127.0.0.1"]
      , b = ["modelo.io", "coohom.com"]
      , w = "__TOOL_LOAD__"
      , T = {
        error: "__exclude_error__",
        api: "__exclude_api__",
        apiError: "__exclude_api_error__"
    }
      , I = [0]
      , E = ["canceled", "promise canceled", "Network Error", "Possible side-effect in debug-evaluate"]
      , k = ["TypeError: Failed to fetch"]
      , O = "KTR_VISIT_SESSION"
      , A = ["360spider", "baiduspider", "googlebot", "sogou", "bytespider", "bingbot", "msnbot", "yisouspider"]
      , S = "pub-meta";
    var x;
    !function(e) {
        e[e.SKA = 100] = "SKA",
        e[e.KA = 500] = "KA",
        e[e.OTHER = 1e3] = "OTHER"
    }(x || (x = {}));
    const j = ["defaulttag", "defualttag"];
    /*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
    function R(e, t, r, n) {
        return new (r || (r = Promise))((function(o, i) {
            function a(e) {
                try {
                    c(n.next(e))
                } catch (e) {
                    i(e)
                }
            }
            function s(e) {
                try {
                    c(n.throw(e))
                } catch (e) {
                    i(e)
                }
            }
            function c(e) {
                var t;
                e.done ? o(e.value) : (t = e.value,
                t instanceof r ? t : new r((function(e) {
                    e(t)
                }
                ))).then(a, s)
            }
            c((n = n.apply(e, t || [])).next())
        }
        ))
    }
    var N = function(e) {
        return function(e) {
            return !!e && "object" == typeof e
        }(e) && !function(e) {
            var t = Object.prototype.toString.call(e);
            return "[object RegExp]" === t || "[object Date]" === t || function(e) {
                return e.$$typeof === _
            }(e)
        }(e)
    };
    var _ = "function" == typeof Symbol && Symbol.for ? Symbol.for("react.element") : 60103;
    function C(e, t) {
        return !1 !== t.clone && t.isMergeableObject(e) ? P(Array.isArray(e) ? [] : {}, e, t) : e
    }
    function L(e, t, r) {
        return e.concat(t).map((function(e) {
            return C(e, r)
        }
        ))
    }
    function M(e) {
        return Object.keys(e).concat(function(e) {
            return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(e).filter((function(t) {
                return e.propertyIsEnumerable(t)
            }
            )) : []
        }(e))
    }
    function U(e, t) {
        try {
            return t in e
        } catch (e) {
            return !1
        }
    }
    function B(e, t, r) {
        var n = {};
        return r.isMergeableObject(e) && M(e).forEach((function(t) {
            n[t] = C(e[t], r)
        }
        )),
        M(t).forEach((function(o) {
            (function(e, t) {
                return U(e, t) && !(Object.hasOwnProperty.call(e, t) && Object.propertyIsEnumerable.call(e, t))
            }
            )(e, o) || (n[o] = U(e, o) && r.isMergeableObject(t[o]) ? function(e, t) {
                if (!t.customMerge)
                    return P;
                var r = t.customMerge(e);
                return "function" == typeof r ? r : P
            }(o, r)(e[o], t[o], r) : C(t[o], r))
        }
        )),
        n
    }
    function P(e, t, r) {
        (r = r || {}).arrayMerge = r.arrayMerge || L,
        r.isMergeableObject = r.isMergeableObject || N,
        r.cloneUnlessOtherwiseSpecified = C;
        var n = Array.isArray(t);
        return n === Array.isArray(e) ? n ? r.arrayMerge(e, t, r) : B(e, t, r) : C(t, r)
    }
    P.all = function(e, t) {
        if (!Array.isArray(e))
            throw Error("first argument should be an array");
        return e.reduce((function(e, r) {
            return P(e, r, t)
        }
        ), {})
    }
    ;
    var q = P;
    var D, F, Q = (function(e, t) {
        e.exports = function() {
            function e() {
                for (var e = 0, t = {}; arguments.length > e; e++) {
                    var r = arguments[e];
                    for (var n in r)
                        t[n] = r[n]
                }
                return t
            }
            function t(e) {
                return e.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent)
            }
            return function r(n) {
                function o() {}
                function i(t, r, i) {
                    if ("undefined" != typeof document) {
                        "number" == typeof (i = e({
                            path: "/"
                        }, o.defaults, i)).expires && (i.expires = new Date(1 * new Date + 864e5 * i.expires)),
                        i.expires = i.expires ? i.expires.toUTCString() : "";
                        try {
                            var a = JSON.stringify(r);
                            /^[\{\[]/.test(a) && (r = a)
                        } catch (e) {}
                        r = n.write ? n.write(r, t) : encodeURIComponent(r + "").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent),
                        t = encodeURIComponent(t + "").replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape);
                        var s = "";
                        for (var c in i)
                            i[c] && (s += "; " + c,
                            !0 !== i[c] && (s += "=" + i[c].split(";")[0]));
                        return document.cookie = t + "=" + r + s
                    }
                }
                function a(e, r) {
                    if ("undefined" != typeof document) {
                        for (var o = {}, i = document.cookie ? document.cookie.split("; ") : [], a = 0; i.length > a; a++) {
                            var s = i[a].split("=")
                              , c = s.slice(1).join("=");
                            r || '"' !== c.charAt(0) || (c = c.slice(1, -1));
                            try {
                                var u = t(s[0]);
                                if (c = (n.read || n)(c, u) || t(c),
                                r)
                                    try {
                                        c = JSON.parse(c)
                                    } catch (e) {}
                                if (o[u] = c,
                                e === u)
                                    break
                            } catch (e) {}
                        }
                        return e ? o[e] : o
                    }
                }
                return o.set = i,
                o.get = function(e) {
                    return a(e, !1)
                }
                ,
                o.getJSON = function(e) {
                    return a(e, !0)
                }
                ,
                o.remove = function(t, r) {
                    i(t, "", e(r, {
                        expires: -1
                    }))
                }
                ,
                o.defaults = {},
                o.withConverter = r,
                o
            }((function() {}
            ))
        }()
    }(F = {
        path: D,
        exports: {},
        require: function(e, t) {
            return function() {
                throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")
            }()
        }
    }, F.exports),
    F.exports);
    class H {
        constructor() {
            this._ktrackerState = {}
        }
        static getInstance() {
            return this.instance || (this.instance = new H),
            this.instance
        }
        setState(e, t=!0) {
            e && "object" == typeof e && (this._ktrackerState = t ? Object.assign(this._ktrackerState, e) : e)
        }
        getState(e) {
            return e ? this._ktrackerState[e] : this._ktrackerState
        }
    }
    const $ = {};
    !function() {
        try {
            let e = sessionStorage.getItem(O);
            e || (e = ne(),
            sessionStorage.setItem(O, e))
        } catch (e) {
            return ne()
        }
    }();
    const z = ne();
    function K(e) {
        if (e) {
            const e = H.getInstance().getState("adjustTimeDiff");
            return Date.now() - (e || 0)
        }
        return Date.now()
    }
    function G() {
        const e = document.querySelector('meta[kjl-global="userid"]');
        return e ? e.getAttribute("content") : window.g_userId ? window.g_userId : ""
    }
    function X(e) {
        const t = document.querySelector(`meta[name="${e}"]`);
        return t ? t.getAttribute("content") : ""
    }
    function W() {
        try {
            return window.location.href
        } catch (e) {
            return ""
        }
    }
    function V() {
        try {
            return window.location.hostname || ""
        } catch (e) {
            return ""
        }
    }
    function J() {
        return window.document.referrer || ""
    }
    function Y() {
        const e = G();
        return !e || c.includes(e) ? ae() : e || ""
    }
    function Z(e) {
        const t = e || X("feBu")
          , r = X("serviceWithStage") || "other";
        if (t) {
            const e = $[t];
            if (e)
                return Object.assign(Object.assign({}, e), {
                    pv: j.includes(e.pv) ? r : e.pv
                });
            const n = (window.ktrackerOptions || {})[t] || r;
            return {
                pn: t,
                pv: j.includes(n) ? r : n,
                ps: ""
            }
        }
        return {
            pn: "",
            pv: "",
            ps: ""
        }
    }
    function ee(e) {
        return Object.prototype.toString.call(e).slice(8, -1)
    }
    function te() {
        return window.navigator.userAgent
    }
    const re = te();
    function ne() {
        let e = K();
        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (function(t) {
            const r = (e + 16 * Math.random()) % 16 | 0;
            return e = Math.floor(e / 16),
            ("x" === t ? r : 3 & r | 8).toString(16)
        }
        ))
    }
    function oe(e) {
        const t = e ? 32 : 16;
        let r = "";
        for (let e = 0; t > e; e++) {
            r += "0123456789abcdef"[Math.floor(16 * Math.random())]
        }
        return r
    }
    function ie(e, t) {
        return function(e) {
            e = e || W();
            try {
                const [,t] = decodeURIComponent(e).split("?");
                if (!t)
                    return {};
                const [r] = t.split("#");
                return r ? r.replace(/&+/g, "&").split("&").reduce(((e,t)=>{
                    if (t) {
                        const [r,n] = t.split("=");
                        e[r] = n
                    }
                    return e
                }
                ), {}) : {}
            } catch (e) {
                return {}
            }
        }(t = t || W())[e] || ""
    }
    function ae(e) {
        se("ktrackerid") && ce("ktrackerid", "", null);
        let t = se("qhdi");
        return t || (t = e || z),
        t
    }
    function se(e) {
        return Q.get(e) || ""
    }
    function ce(e, t, r) {
        let n;
        switch (ee(r)) {
        case o.DATE:
            n = r;
            break;
        case o.NUMBER:
            n = new Date(K() + 1e3 * parseInt(r, 10) * 60 * 60 * 24);
            break;
        default:
            n = new Date
        }
        Q.set(e, t, {
            expires: n
        })
    }
    function ue(e) {
        return ee(e) === o.OBJECT && 0 === Object.keys(e).length
    }
    function le(e) {
        const t = document.createElement("a");
        return t.href = e,
        t.href
    }
    function fe(e) {
        const t = document.createElement("a");
        return t.href = e,
        t.origin
    }
    const de = ()=>window.document.origin;
    function pe(e, t="hh:mm:ss") {
        let r = new Date;
        e || (r = new Date),
        ee(e) === o.NUMBER ? r = new Date((new Date).setTime(e)) : ee(e) === o.STRING && (r = new Date(e)),
        "" + r == "Invalid Date" && (r = new Date);
        const n = {
            "M+": r.getMonth() + 1,
            "d+": r.getDate(),
            "h+": r.getHours(),
            "m+": r.getMinutes(),
            "s+": r.getSeconds(),
            "q+": Math.floor((r.getMonth() + 3) / 3),
            S: r.getMilliseconds()
        };
        /(y+)/.test(t) && (t = t.replace(RegExp.$1, (r.getFullYear() + "").substr(4 - RegExp.$1.length)));
        for (const e in n)
            n.hasOwnProperty(e) && RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 === RegExp.$1.length ? n[e] : ("00" + n[e]).substr(("" + n[e]).length)));
        return t
    }
    function he(e) {
        if (!e || !Ee(e))
            return !1;
        try {
            const {host: t, pathname: r} = new URL(e);
            if (i.some((e=>t.includes(e))))
                return !1;
            return !a.some((t=>t instanceof RegExp ? t.test(r) : "string" == typeof t && e.includes(t)))
        } catch (e) {
            return !1
        }
    }
    const ge = function() {
        const e = !!window.navigator
          , t = !!window.performance
          , r = {
            fetch: !!window.fetch,
            addEventListener: !!window.addEventListener,
            MutationObserver: !!window.MutationObserver,
            XMLHttpRequest: !!window.XMLHttpRequest,
            navigator: e,
            performance: t
        };
        return e && (r.connection = !!window.navigator.connection,
        r.sendBeacon = !!window.navigator.sendBeacon),
        t && (r.mark = !!window.performance.mark,
        r.getEntriesByName = !!window.performance.getEntriesByName,
        r.getEntriesByType = !!window.performance.getEntriesByType,
        r.timing = !!window.performance.timing),
        r
    }();
    function me(e) {
        return "string" == typeof e ? ge[e] : !!Array.isArray(e) && e.every((e=>ge[e]))
    }
    function ye(e, t=e) {
        if (ee(e) === o.STRING)
            return e;
        try {
            return JSON.stringify(e) || t
        } catch (e) {
            return t
        }
    }
    function ve(e) {
        if (e instanceof Error)
            return e;
        return ee(e) === o.STRING ? function(e, t) {
            try {
                return JSON.parse(e) || t
            } catch (e) {
                return t
            }
        }(e, e) : ye(e, be(e))
    }
    function be(e) {
        const t = ee(e);
        return t === o.STRING ? e : t === o.OBJECT ? ye(e, "" + e) : "" + e
    }
    const we = ()=>{}
    ;
    function Te({event: e, listener: t, eachCallback: r}) {
        const {events: n, normalizedListener: i} = function(e, t) {
            let r = [];
            const n = ee(e);
            n === o.STRING ? r = e.split(",") : n === o.ARRAY && (r = e);
            let i = t;
            const a = ee(t);
            return a !== o.FUNC && a !== o.UNDEFINED && (i = we),
            {
                events: r.map((e=>ee(e) === o.STRING ? e.trim() : "" + e)),
                normalizedListener: i
            }
        }(e, t);
        Array.isArray(n) && n.length > 0 && n.forEach(((e,t,n)=>r({
            eventName: e.trim(),
            index: t,
            array: n,
            listener: i
        })))
    }
    function Ie(e) {
        return e >= 200 && 300 > e || 304 === e
    }
    function Ee(e) {
        return /^(https?:)?\/\/?/.test(e)
    }
    function ke() {
        return function() {
            const e = V();
            return b.some((t=>e.endsWith(t)))
        }() ? y : m
    }
    function Oe(e) {
        const t = Ee(e) ? e : le(e);
        let r = t;
        try {
            r = new URL(t).pathname
        } catch (e) {
            const t = r.indexOf("?");
            r = t > -1 ? r.slice(0, t) : r;
            const n = r.indexOf("#");
            r = n > -1 ? r.slice(0, n) : r
        }
        try {
            return s.test(r)
        } catch (e) {
            return !1
        }
    }
    function Ae() {
        return X("feBu") || ""
    }
    function Se() {
        let e = x.OTHER;
        if (!window.__PUB_BUCKET_CONFIG__ || !window.__PUB_BUCKET_CONFIG__.buckets)
            return e;
        const {isKA: t, isSKA: r} = window.__PUB_BUCKET_CONFIG__.buckets;
        return r && r.optimized && (e = x.SKA),
        e === x.OTHER && t && t.optimized && (e = x.KA),
        e
    }
    function xe(e, t, r) {
        return t && e in t ? t[e] : r
    }
    const je = "https://actionstat.kujiale.com"
      , Re = "https://actiontrack.kujiale.com:8888"
      , Ne = ke();
    var _e = {
        eventApiUrl: Ne + "/api/frontend/event",
        newEventApiUrl: Ne + "/api/v2/fe/event",
        exceptionApiUrl: Ne + "/api/frontend/exception",
        newExceptionApiUrl: Ne + "/api/v2/fe/exception",
        performanceApiUrl: Ne + "/api/frontend/performance",
        traceApiUrl: Ne + "/api/v2/fe/trace",
        kioAutoTrackUrl: je + "/v2/api/eventtrack",
        kioAutoTrackTextUrl: je + "/v2/api/eventtrack/text",
        kioYuntaiTrackUrl: je + "/api/toolbehaviors/yuntaiGeneralTargetAction/log",
        actionstatUrl: je + "/api/toolbehaviors",
        multiActionstatUrl: je + "/api/multi-behaviors",
        actiontrackUrl: Re + "/actiontrack/api/toolbehaviors",
        multiActiontrackUrl: Re + "/actiontrack/api/multi-behaviors",
        maxStackDepth: 10,
        maxLogCount: 200,
        maxTraceLogCount: 1e3,
        initException: !0,
        initPagePerformance: !0,
        initTraceCollector: !1,
        getPagePerformance: !0,
        getResourcePerformance: !0,
        getAjaxPerformance: !0,
        getFetchPerformance: !1,
        getViewport: !0,
        getUnhandledrejection: !0,
        ktrackerInitTimeKey: "ktrackertime",
        debounceThreshold: 15e3,
        throttleThreshold: 500,
        slowThreshold: 16e3,
        browserSampleThreshold: 3e5,
        enableBrowserSample: !0,
        loadedThreshold: 3e5,
        performanceDelay: 0,
        trace128bit: !1,
        isCoohom: !1,
        debug: !1,
        webglStat: !1,
        autoInit: !0
    }
      , Ce = {
        primary(e) {
            console.log(`%c${pe()}: %c Ktracker `, "color:#999", "background:#1a7afb;color:#fff", e)
        },
        info(e) {
            console.log(`%c${pe()}: %c Ktracker `, "color:#999", "background:#909399;color:#fff", e)
        },
        warn(e) {
            console.log(`%c${pe()}: %c Ktracker `, "color:#999", "background:#faad14;color:#fff", e)
        },
        error(e) {
            console.log(`%c${pe()}: %c Ktracker `, "color:#999", "background:#f5222d;color:#fff", e)
        },
        success(e) {
            console.log(`%c${pe()}: %c Ktracker `, "color:#999", "background:#67C23A;color:#fff", e)
        }
    };
    function Le(e) {
        return !isNaN(parseFloat(e)) && isFinite(e)
    }
    const Me = ["isConstructor", "isEval", "isNative", "isToplevel"]
      , Ue = ["columnNumber", "lineNumber"]
      , Be = ["args"]
      , Pe = Me.concat(Ue, ["fileName", "functionName", "source"], Be);
    class qe {
        constructor(e) {
            for (const t of Pe)
                if (e.hasOwnProperty(t) && void 0 !== e[t])
                    if (Me.includes(t))
                        this[t] = !!e[t];
                    else if (Be.includes(t)) {
                        if ("[object Array]" !== Object.prototype.toString.call(e[t]))
                            throw new TypeError("Args must be an Array");
                        this.args = e[t]
                    } else if (Ue.includes(t)) {
                        if (!Le(e[t]))
                            throw new TypeError(t + " must be a Number");
                        this[t] = Number(e[t])
                    } else
                        this[t] = e[t] + ""
        }
        toString() {
            return (this.functionName || "{anonymous}") + ("(" + (this.args || []).join(",") + ")") + (this.fileName ? "@" + this.fileName : "") + (Le(this.lineNumber) ? ":" + this.lineNumber : "") + (Le(this.columnNumber) ? ":" + this.columnNumber : "")
        }
        static fromString(e) {
            const t = e.indexOf("(")
              , r = e.lastIndexOf(")")
              , n = e.substring(0, t)
              , o = e.substring(t + 1, r).split(",")
              , i = e.substring(r + 1);
            let a, s, c;
            if (0 === i.indexOf("@")) {
                const e = /@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i);
                e && (a = e[1],
                s = e[2] ? Number(e[2]) : void 0,
                c = e[3] ? Number(e[3]) : void 0)
            }
            return new qe({
                functionName: n,
                args: o,
                fileName: a,
                lineNumber: s || void 0,
                columnNumber: c || void 0
            })
        }
    }
    const De = /^\s*at .*(\S+\:\d+|\(native\))/m
      , Fe = /^(eval@)?(\[native code\])?$/;
    function Qe(e) {
        if (e.stack && e.stack.match(De))
            return function(e) {
                return e.stack.split("\n").filter((e=>!!e.match(De))).map((e=>{
                    const {pubAppName: t, resourceId: r} = $e(e);
                    e.indexOf("(eval ") > -1 && (e = e.replace(/eval code/g, "eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g, ""));
                    let n = [];
                    try {
                        n = e.replace(/^\s+/, "").replace(/\(eval code/g, "(").split(/\s+/).slice(1)
                    } catch (e) {}
                    const o = ze(n.pop())
                      , i = n.join(" ") || void 0;
                    return {
                        stackFrame: new qe({
                            functionName: i,
                            fileName: ["eval", "<anonymous>"].indexOf(o[0]) > -1 ? void 0 : o[0],
                            lineNumber: o[1],
                            columnNumber: o[2],
                            source: e
                        }),
                        pubAppName: t,
                        resourceId: r
                    }
                }
                ))
            }(e);
        if (e.stack)
            return function(e) {
                return e.stack.split("\n").filter((e=>!e.match(Fe))).map((e=>{
                    const {pubAppName: t, resourceId: r} = $e(e);
                    if (e.indexOf(" > eval") > -1 && (e = e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g, ":$1")),
                    -1 === e.indexOf("@") && -1 === e.indexOf(":"))
                        return {
                            stackFrame: new qe({
                                functionName: e
                            }),
                            pubAppName: t,
                            resourceId: r
                        };
                    {
                        const n = /((.*".+"[^@]*)?[^@]*)(?:@)/
                          , o = e.match(n)
                          , i = o && o[1] ? o[1] : void 0
                          , a = ze(e.replace(n, ""));
                        return {
                            stackFrame: new qe({
                                functionName: i,
                                fileName: a[0],
                                lineNumber: a[1],
                                columnNumber: a[2],
                                source: e
                            }),
                            pubAppName: t,
                            resourceId: r
                        }
                    }
                }
                ))
            }(e);
        throw Error("Cannot parse given Error object")
    }
    function He(e, t) {
        try {
            e = e.replace(/[\[\]]/g, "\\$&");
            const r = RegExp("[?&]" + t + "(=([^&#]*)|&|#|$)").exec(e);
            return r ? r[2] ? decodeURIComponent(r[2].replace(/\+/g, " ")) : "" : null
        } catch (e) {
            return null
        }
    }
    function $e(e) {
        const t = He(e, "pn");
        let r = He(e, "ps");
        return r && (-1 !== r.indexOf(":") && (r = r.split(":")[0]),
        -1 !== r.indexOf(" ") && (r = r.split(" ")[0])),
        {
            pubAppName: t,
            resourceId: r
        }
    }
    function ze(e) {
        if (-1 === e.indexOf(":"))
            return [e];
        const t = /(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g, ""));
        return [t[1], t[2], t[3]]
    }
    function Ke(e, t, r, n) {
        var o, i = !1, a = 0;
        function s() {
            o && clearTimeout(o)
        }
        function c() {
            for (var c = arguments.length, u = Array(c), l = 0; c > l; l++)
                u[l] = arguments[l];
            var f = this
              , d = Date.now() - a;
            function p() {
                a = Date.now(),
                r.apply(f, u)
            }
            function h() {
                o = void 0
            }
            i || (n && !o && p(),
            s(),
            void 0 === n && d > e ? p() : !0 !== t && (o = setTimeout(n ? h : p, void 0 === n ? e - d : e)))
        }
        return "boolean" != typeof t && (n = r,
        r = t,
        t = void 0),
        c.cancel = function() {
            s(),
            i = !0
        }
        ,
        c
    }
    function Ge(e, t, r) {
        return void 0 === r ? Ke(e, t, !1) : Ke(e, r, !1 !== t)
    }
    class Xe {
        constructor(e=-1) {
            this.queueCache = [],
            this.maxDepth = e
        }
        static getXHRQueue() {
            return this.xhrQueue || (this.xhrQueue = new Xe),
            this.xhrQueue
        }
        static getResourceSrcQueue(e=50) {
            return this.resourceSrcQueue && e === this.resourceSrcQueue.maxDepth || (this.resourceSrcQueue = new Xe(e)),
            this.resourceSrcQueue
        }
        static getResourceTimingQueue() {
            return this.resourceTimingQueue || (this.resourceTimingQueue = new Xe),
            this.resourceTimingQueue
        }
        static getErrorQueue() {
            return this.errorQueue || (this.errorQueue = new Xe),
            this.errorQueue
        }
        static getToolTraceQueue() {
            return this.toolTraceQueue || (this.toolTraceQueue = new Xe),
            this.toolTraceQueue
        }
        static getTraceQueue() {
            return this.traceQueue || (this.traceQueue = new Xe),
            this.traceQueue
        }
        static getSubAppsQueue() {
            return this.subAppsQueue || (this.subAppsQueue = new Xe),
            this.subAppsQueue
        }
        static getActionstatQueue() {
            return this.actionstatQueue = this.actionstatQueue || new Xe
        }
        static getActiontrackQueue() {
            return this.actiontrackQueue = this.actiontrackQueue || new Xe
        }
        includes(e) {
            const t = this.queueCache.indexOf(e);
            return t > -1 && (this.queueCache = this.queueCache.concat(this.queueCache.splice(t, 1)),
            !0)
        }
        push(e) {
            this.queueCache = this.queueCache.concat(e);
            const t = this.size();
            if (this.maxDepth > -1 && t > this.maxDepth)
                if (Array.isArray(e)) {
                    this.queueCache.splice(0, Math.abs(this.maxDepth - t))
                } else
                    this.queueCache.shift();
            return this
        }
        list() {
            return this.queueCache
        }
        size() {
            return this.queueCache.length
        }
        clear() {
            this.queueCache = []
        }
        get lastItem() {
            return this.list()[this.size() - 1]
        }
        updateLastItem(e) {
            this.queueCache.splice(this.size() - 1, 1, e)
        }
    }
    var We = {}
      , Ve = Uint8Array
      , Je = Uint16Array
      , Ye = Uint32Array
      , Ze = new Ve([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0])
      , et = new Ve([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0])
      , tt = new Ve([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15])
      , rt = function(e, t) {
        for (var r = new Je(31), n = 0; 31 > n; ++n)
            r[n] = t += 1 << e[n - 1];
        var o = new Ye(r[30]);
        for (n = 1; 30 > n; ++n)
            for (var i = r[n]; r[n + 1] > i; ++i)
                o[i] = i - r[n] << 5 | n;
        return [r, o]
    }
      , nt = rt(Ze, 2)
      , ot = nt[1];
    nt[0][28] = 258,
    ot[258] = 28;
    for (var it = rt(et, 0), at = it[1], st = new Je(32768), ct = 0; 32768 > ct; ++ct) {
        var ut = (43690 & ct) >>> 1 | (21845 & ct) << 1;
        st[ct] = ((65280 & (ut = (61680 & (ut = (52428 & ut) >>> 2 | (13107 & ut) << 2)) >>> 4 | (3855 & ut) << 4)) >>> 8 | (255 & ut) << 8) >>> 1
    }
    var lt = function(e, t, r) {
        for (var n = e.length, o = 0, i = new Je(t); n > o; ++o)
            e[o] && ++i[e[o] - 1];
        var a, s = new Je(t);
        for (o = 0; t > o; ++o)
            s[o] = s[o - 1] + i[o - 1] << 1;
        if (r) {
            a = new Je(1 << t);
            var c = 15 - t;
            for (o = 0; n > o; ++o)
                if (e[o])
                    for (var u = o << 4 | e[o], l = t - e[o], f = s[e[o] - 1]++ << l, d = f | (1 << l) - 1; d >= f; ++f)
                        a[st[f] >>> c] = u
        } else
            for (a = new Je(n),
            o = 0; n > o; ++o)
                e[o] && (a[o] = st[s[e[o] - 1]++] >>> 15 - e[o]);
        return a
    }
      , ft = new Ve(288);
    for (ct = 0; 144 > ct; ++ct)
        ft[ct] = 8;
    for (ct = 144; 256 > ct; ++ct)
        ft[ct] = 9;
    for (ct = 256; 280 > ct; ++ct)
        ft[ct] = 7;
    for (ct = 280; 288 > ct; ++ct)
        ft[ct] = 8;
    var dt = new Ve(32);
    for (ct = 0; 32 > ct; ++ct)
        dt[ct] = 5;
    var pt = lt(ft, 9, 0)
      , ht = lt(dt, 5, 0)
      , gt = function(e) {
        return (e + 7) / 8 | 0
    }
      , mt = function(e, t, r) {
        (null == t || 0 > t) && (t = 0),
        (null == r || r > e.length) && (r = e.length);
        var n = new (2 == e.BYTES_PER_ELEMENT ? Je : 4 == e.BYTES_PER_ELEMENT ? Ye : Ve)(r - t);
        return n.set(e.subarray(t, r)),
        n
    }
      , yt = ["unexpected EOF", "invalid block type", "invalid length/literal", "invalid distance", "stream finished", "no stream handler", , "no callback", "invalid UTF-8 data", "extra field too long", "date not in range 1980-2099", "filename too long", "stream finishing", "invalid zip data"]
      , vt = function(e, t, r) {
        var n = Error(t || yt[e]);
        if (n.code = e,
        Error.captureStackTrace && Error.captureStackTrace(n, vt),
        !r)
            throw n;
        return n
    }
      , bt = function(e, t, r) {
        var n = t / 8 | 0;
        e[n] |= r <<= 7 & t,
        e[n + 1] |= r >>> 8
    }
      , wt = function(e, t, r) {
        var n = t / 8 | 0;
        e[n] |= r <<= 7 & t,
        e[n + 1] |= r >>> 8,
        e[n + 2] |= r >>> 16
    }
      , Tt = function(e, t) {
        for (var r = [], n = 0; e.length > n; ++n)
            e[n] && r.push({
                s: n,
                f: e[n]
            });
        var o = r.length
          , i = r.slice();
        if (!o)
            return [xt, 0];
        if (1 == o) {
            var a = new Ve(r[0].s + 1);
            return a[r[0].s] = 1,
            [a, 1]
        }
        r.sort((function(e, t) {
            return e.f - t.f
        }
        )),
        r.push({
            s: -1,
            f: 25001
        });
        var s = r[0]
          , c = r[1]
          , u = 0
          , l = 1
          , f = 2;
        for (r[0] = {
            s: -1,
            f: s.f + c.f,
            l: s,
            r: c
        }; l != o - 1; )
            s = r[r[f].f > r[u].f ? u++ : f++],
            c = r[u != l && r[f].f > r[u].f ? u++ : f++],
            r[l++] = {
                s: -1,
                f: s.f + c.f,
                l: s,
                r: c
            };
        var d = i[0].s;
        for (n = 1; o > n; ++n)
            i[n].s > d && (d = i[n].s);
        var p = new Je(d + 1)
          , h = It(r[l - 1], p, 0);
        if (h > t) {
            n = 0;
            var g = 0
              , m = h - t
              , y = 1 << m;
            for (i.sort((function(e, t) {
                return p[t.s] - p[e.s] || e.f - t.f
            }
            )); o > n; ++n) {
                var v = i[n].s;
                if (t >= p[v])
                    break;
                g += y - (1 << h - p[v]),
                p[v] = t
            }
            for (g >>>= m; g > 0; ) {
                var b = i[n].s;
                t > p[b] ? g -= 1 << t - p[b]++ - 1 : ++n
            }
            for (; n >= 0 && g; --n) {
                var w = i[n].s;
                p[w] == t && (--p[w],
                ++g)
            }
            h = t
        }
        return [new Ve(p), h]
    }
      , It = function(e, t, r) {
        return -1 == e.s ? Math.max(It(e.l, t, r + 1), It(e.r, t, r + 1)) : t[e.s] = r
    }
      , Et = function(e) {
        for (var t = e.length; t && !e[--t]; )
            ;
        for (var r = new Je(++t), n = 0, o = e[0], i = 1, a = function(e) {
            r[n++] = e
        }, s = 1; t >= s; ++s)
            if (e[s] == o && s != t)
                ++i;
            else {
                if (!o && i > 2) {
                    for (; i > 138; i -= 138)
                        a(32754);
                    i > 2 && (a(i > 10 ? i - 11 << 5 | 28690 : i - 3 << 5 | 12305),
                    i = 0)
                } else if (i > 3) {
                    for (a(o),
                    --i; i > 6; i -= 6)
                        a(8304);
                    i > 2 && (a(i - 3 << 5 | 8208),
                    i = 0)
                }
                for (; i--; )
                    a(o);
                i = 1,
                o = e[s]
            }
        return [r.subarray(0, n), t]
    }
      , kt = function(e, t) {
        for (var r = 0, n = 0; t.length > n; ++n)
            r += e[n] * t[n];
        return r
    }
      , Ot = function(e, t, r) {
        var n = r.length
          , o = gt(t + 2);
        e[o] = 255 & n,
        e[o + 1] = n >>> 8,
        e[o + 2] = 255 ^ e[o],
        e[o + 3] = 255 ^ e[o + 1];
        for (var i = 0; n > i; ++i)
            e[o + i + 4] = r[i];
        return 8 * (o + 4 + n)
    }
      , At = function(e, t, r, n, o, i, a, s, c, u, l) {
        bt(t, l++, r),
        ++o[256];
        for (var f = Tt(o, 15), d = f[0], p = f[1], h = Tt(i, 15), g = h[0], m = h[1], y = Et(d), v = y[0], b = y[1], w = Et(g), T = w[0], I = w[1], E = new Je(19), k = 0; v.length > k; ++k)
            E[31 & v[k]]++;
        for (k = 0; T.length > k; ++k)
            E[31 & T[k]]++;
        for (var O = Tt(E, 7), A = O[0], S = O[1], x = 19; x > 4 && !A[tt[x - 1]]; --x)
            ;
        var j, R, N, _, C = u + 5 << 3, L = kt(o, ft) + kt(i, dt) + a, M = kt(o, d) + kt(i, g) + a + 14 + 3 * x + kt(E, A) + (2 * E[16] + 3 * E[17] + 7 * E[18]);
        if (L >= C && M >= C)
            return Ot(t, l, e.subarray(c, c + u));
        if (bt(t, l, 1 + (L > M)),
        l += 2,
        L > M) {
            j = lt(d, p, 0),
            R = d,
            N = lt(g, m, 0),
            _ = g;
            var U = lt(A, S, 0);
            bt(t, l, b - 257),
            bt(t, l + 5, I - 1),
            bt(t, l + 10, x - 4),
            l += 14;
            for (k = 0; x > k; ++k)
                bt(t, l + 3 * k, A[tt[k]]);
            l += 3 * x;
            for (var B = [v, T], P = 0; 2 > P; ++P) {
                var q = B[P];
                for (k = 0; q.length > k; ++k) {
                    bt(t, l, U[D = 31 & q[k]]),
                    l += A[D],
                    D > 15 && (bt(t, l, q[k] >>> 5 & 127),
                    l += q[k] >>> 12)
                }
            }
        } else
            j = pt,
            R = ft,
            N = ht,
            _ = dt;
        for (k = 0; s > k; ++k)
            if (n[k] > 255) {
                var D;
                wt(t, l, j[(D = n[k] >>> 18 & 31) + 257]),
                l += R[D + 257],
                D > 7 && (bt(t, l, n[k] >>> 23 & 31),
                l += Ze[D]);
                var F = 31 & n[k];
                wt(t, l, N[F]),
                l += _[F],
                F > 3 && (wt(t, l, n[k] >>> 5 & 8191),
                l += et[F])
            } else
                wt(t, l, j[n[k]]),
                l += R[n[k]];
        return wt(t, l, j[256]),
        l + R[256]
    }
      , St = new Ye([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632])
      , xt = new Ve(0)
      , jt = function(e, t, r, n, o, i) {
        var a = e.length
          , s = new Ve(n + a + 5 * (1 + Math.ceil(a / 7e3)) + o)
          , c = s.subarray(n, s.length - o)
          , u = 0;
        if (!t || 8 > a)
            for (var l = 0; a >= l; l += 65535) {
                var f = l + 65535;
                a > f || (c[u >> 3] = i),
                u = Ot(c, u + 1, e.subarray(l, f))
            }
        else {
            for (var d = St[t - 1], p = d >>> 13, h = 8191 & d, g = (1 << r) - 1, m = new Je(32768), y = new Je(g + 1), v = Math.ceil(r / 3), b = 2 * v, w = function(t) {
                return (e[t] ^ e[t + 1] << v ^ e[t + 2] << b) & g
            }, T = new Ye(25e3), I = new Je(288), E = new Je(32), k = 0, O = 0, A = (l = 0,
            0), S = 0, x = 0; a > l; ++l) {
                var j = w(l)
                  , R = 32767 & l
                  , N = y[j];
                if (m[R] = N,
                y[j] = R,
                l >= S) {
                    var _ = a - l;
                    if ((k > 7e3 || A > 24576) && _ > 423) {
                        u = At(e, c, 0, T, I, E, O, A, x, l - x, u),
                        A = k = O = 0,
                        x = l;
                        for (var C = 0; 286 > C; ++C)
                            I[C] = 0;
                        for (C = 0; 30 > C; ++C)
                            E[C] = 0
                    }
                    var L = 2
                      , M = 0
                      , U = h
                      , B = R - N & 32767;
                    if (_ > 2 && j == w(l - B))
                        for (var P = Math.min(p, _) - 1, q = Math.min(32767, l), D = Math.min(258, _); q >= B && --U && R != N; ) {
                            if (e[l + L] == e[l + L - B]) {
                                for (var F = 0; D > F && e[l + F] == e[l + F - B]; ++F)
                                    ;
                                if (F > L) {
                                    if (L = F,
                                    M = B,
                                    F > P)
                                        break;
                                    var Q = Math.min(B, F - 2)
                                      , H = 0;
                                    for (C = 0; Q > C; ++C) {
                                        var $ = l - B + C + 32768 & 32767
                                          , z = $ - m[$] + 32768 & 32767;
                                        z > H && (H = z,
                                        N = $)
                                    }
                                }
                            }
                            B += (R = N) - (N = m[R]) + 32768 & 32767
                        }
                    if (M) {
                        T[A++] = 268435456 | ot[L] << 18 | at[M];
                        var K = 31 & ot[L]
                          , G = 31 & at[M];
                        O += Ze[K] + et[G],
                        ++I[257 + K],
                        ++E[G],
                        S = l + L,
                        ++k
                    } else
                        T[A++] = e[l],
                        ++I[e[l]]
                }
            }
            u = At(e, c, i, T, I, E, O, A, x, l - x, u),
            !i && 7 & u && (u = Ot(c, u + 1, xt))
        }
        return mt(s, 0, n + gt(u) + o)
    }
      , Rt = function() {
        for (var e = new Int32Array(256), t = 0; 256 > t; ++t) {
            for (var r = t, n = 9; --n; )
                r = (1 & r && -306674912) ^ r >>> 1;
            e[t] = r
        }
        return e
    }()
      , Nt = function() {
        var e = -1;
        return {
            p: function(t) {
                for (var r = e, n = 0; t.length > n; ++n)
                    r = Rt[255 & r ^ t[n]] ^ r >>> 8;
                e = r
            },
            d: function() {
                return ~e
            }
        }
    }
      , _t = function(e, t, r, n, o) {
        return jt(e, null == t.level ? 6 : t.level, null == t.mem ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(e.length)))) : 12 + t.mem, r, n, !o)
    }
      , Ct = function(e, t, r) {
        for (var n = e(), o = "" + e, i = o.slice(o.indexOf("[") + 1, o.lastIndexOf("]")).replace(/\s+/g, "").split(","), a = 0; n.length > a; ++a) {
            var s = n[a]
              , c = i[a];
            if ("function" == typeof s) {
                t += ";" + c + "=";
                var u = "" + s;
                if (s.prototype)
                    if (-1 != u.indexOf("[native code]")) {
                        var l = u.indexOf(" ", 8) + 1;
                        t += u.slice(l, u.indexOf("(", l))
                    } else
                        for (var f in t += u,
                        s.prototype)
                            t += ";" + c + ".prototype." + f + "=" + s.prototype[f];
                else
                    t += u
            } else
                r[c] = s
        }
        return [t, r]
    }
      , Lt = []
      , Mt = function(e, t, r, n) {
        var o;
        if (!Lt[r]) {
            for (var i = "", a = {}, s = e.length - 1, c = 0; s > c; ++c)
                i = (o = Ct(e[c], i, a))[0],
                a = o[1];
            Lt[r] = Ct(e[s], i, a)
        }
        var u = function(e, t) {
            var r = {};
            for (var n in e)
                r[n] = e[n];
            for (var n in t)
                r[n] = t[n];
            return r
        }({}, Lt[r][1]);
        return function(e, t, r, n, o) {
            var i = new Worker(We[t] || (We[t] = URL.createObjectURL(new Blob([e + ';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{
                type: "text/javascript"
            }))));
            return i.onmessage = function(e) {
                var t = e.data
                  , r = t.$e$;
                if (r) {
                    var n = Error(r[0]);
                    n.code = r[1],
                    n.stack = r[2],
                    o(n, null)
                } else
                    o(null, t)
            }
            ,
            i.postMessage(r, n),
            i
        }(Lt[r][0] + ";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=" + t + "}", r, u, function(e) {
            var t = [];
            for (var r in e)
                e[r].buffer && t.push((e[r] = new e[r].constructor(e[r])).buffer);
            return t
        }(u), n)
    }
      , Ut = function() {
        return [Ve, Je, Ye, Ze, et, tt, ot, at, pt, ft, ht, dt, st, St, xt, lt, bt, wt, Tt, It, Et, kt, Ot, At, gt, mt, jt, _t, Qt, Pt]
    }
      , Bt = function() {
        return [Dt, Ft, qt, Nt, Rt]
    }
      , Pt = function(e) {
        return postMessage(e, [e.buffer])
    }
      , qt = function(e, t, r) {
        for (; r; ++t)
            e[t] = r,
            r >>>= 8
    }
      , Dt = function(e, t) {
        var r = t.filename;
        if (e[0] = 31,
        e[1] = 139,
        e[2] = 8,
        e[8] = 2 > t.level ? 4 : 9 == t.level ? 2 : 0,
        e[9] = 3,
        0 != t.mtime && qt(e, 4, Math.floor(new Date(t.mtime || Date.now()) / 1e3)),
        r) {
            e[3] = 8;
            for (var n = 0; r.length >= n; ++n)
                e[n + 10] = r.charCodeAt(n)
        }
    }
      , Ft = function(e) {
        return 10 + (e.filename && e.filename.length + 1 || 0)
    };
    function Qt(e, t) {
        return _t(e, t || {}, 0, 0)
    }
    function Ht(e, t, r) {
        return r || (r = t,
        t = {}),
        "function" != typeof r && vt(7),
        function(e, t, r, n, o, i) {
            var a = Mt(r, n, o, (function(e, t) {
                a.terminate(),
                i(e, t)
            }
            ));
            return a.postMessage([e, t], t.consume ? [e.buffer] : []),
            function() {
                a.terminate()
            }
        }(e, t, [Ut, Bt, function() {
            return [$t]
        }
        ], (function(e) {
            return Pt($t(e.data[0], e.data[1]))
        }
        ), 2, r)
    }
    function $t(e, t) {
        t || (t = {});
        var r = Nt()
          , n = e.length;
        r.p(e);
        var o = _t(e, t, Ft(t), 8)
          , i = o.length;
        return Dt(o, t),
        qt(o, i - 8, r.d()),
        qt(o, i - 4, n),
        o
    }
    var zt = "undefined" != typeof TextEncoder && new TextEncoder
      , Kt = "undefined" != typeof TextDecoder && new TextDecoder;
    try {
        Kt.decode(xt, {
            stream: !0
        }),
        1
    } catch (e) {}
    const Gt = {};
    function Xt(e, t) {
        Ht(function(e, t) {
            if (t) {
                for (var r = new Ve(e.length), n = 0; e.length > n; ++n)
                    r[n] = e.charCodeAt(n);
                return r
            }
            if (zt)
                return zt.encode(e);
            var o = e.length
              , i = new Ve(e.length + (e.length >> 1))
              , a = 0
              , s = function(e) {
                i[a++] = e
            };
            for (n = 0; o > n; ++n) {
                if (a + 5 > i.length) {
                    var c = new Ve(a + 8 + (o - n << 1));
                    c.set(i),
                    i = c
                }
                var u = e.charCodeAt(n);
                128 > u || t ? s(u) : 2048 > u ? (s(192 | u >> 6),
                s(128 | 63 & u)) : u > 55295 && 57344 > u ? (s(240 | (u = 65536 + (1047552 & u) | 1023 & e.charCodeAt(++n)) >> 18),
                s(128 | u >> 12 & 63),
                s(128 | u >> 6 & 63),
                s(128 | 63 & u)) : (s(224 | u >> 12),
                s(128 | u >> 6 & 63),
                s(128 | 63 & u))
            }
            return mt(i, 0, a)
        }(e), t)
    }
    function Wt(e, t, r) {
        return new Promise((n=>{
            const o = window.navigator.sendBeacon(e, t);
            (null == r ? void 0 : r.debug) && (o ? Ce.info("ajax send[url: " + e + ", sendWithBeacon: true]") : Ce.error("ajax error[url: " + e + ", sendWithBeacon: true]")),
            n(o)
        }
        ))
    }
    function Vt(e, t, r={}) {
        const n = Gt[e] = Gt[e] || {
            count: 0,
            timer: null
        }
          , o = n.count;
        return new Promise((i=>{
            if (o >= 3)
                return function(e) {
                    const t = Gt[e];
                    t.timer || (t.timer = setTimeout((()=>{
                        t.count = 0,
                        t.timer && (clearTimeout(t.timer),
                        t.timer = null)
                    }
                    ), 6e4))
                }(e),
                i(!1);
            const a = new XMLHttpRequest;
            a.timeout = 1e3,
            a.onload = function() {
                const t = Ie(a.status);
                t && (n.count = 0),
                (null == r ? void 0 : r.debug) && (t ? Ce.info("ajax send[url: " + e + ", sendWithXHR: true]") : Ce.error("ajax error[url: " + e + ", sendWithXHR: true]")),
                i(t)
            }
            ,
            a.onerror = function() {
                n.count = o + 1,
                (null == r ? void 0 : r.debug) && Ce.error("ajax error[url: " + e + ", sendWithXHR: true]"),
                i(!1)
            }
            ,
            a.ontimeout = function() {
                n.count = o + 1
            }
            ,
            a.open("POST", e);
            let s = "text/plain; charset=UTF-8";
            r.isJson && (s = "application/json; charset=utf-8"),
            r.useGzip && a.setRequestHeader("Content-Encoding", "gzip"),
            r.useGzip || a.setRequestHeader("Content-Type", s),
            a.send(t)
        }
        ))
    }
    function Jt(e, t, r={}) {
        return R(this, void 0, void 0, (function*() {
            const n = ee(t) === o.OBJECT ? ye(t, "") : t;
            if (!n)
                return Promise.resolve(!1);
            const i = wr.getInstance().getOptions()
              , a = Object.assign(Object.assign({}, i), r);
            if (r.useGzip) {
                const t = window.ktrackerOptions || {};
                return (i.debug || t.debug) && Ce.info("sendTrackData [url：" + e + ", payload：" + n + ", size：" + (null == n ? void 0 : n.length) || "Unknown Size]"),
                Xt(n, ((t,o)=>{
                    let i = n;
                    return t || (i = o),
                    r.useBeacon && window.navigator.sendBeacon ? Wt(e, i, a) : Vt(e, i, a)
                }
                )),
                Promise.resolve(!0)
            }
            return r.useBeacon && window.navigator.sendBeacon ? Wt(e, n, a) : Vt(e, n, a)
        }
        ))
    }
    function Yt(e, t) {
        if (!(e = ve(e)).stack)
            return {
                parsedStack: {
                    name: "Error",
                    message: be(e),
                    url: W(),
                    stack: [],
                    originStack: ""
                },
                labels: br()
            };
        try {
            const r = Qe(e)
              , n = [];
            let o = ""
              , i = "";
            for (const [e,{stackFrame: a, pubAppName: s, resourceId: c}] of r.entries())
                !o && !i && s && c && (o = s,
                i = c),
                t > e && n.push({
                    url: a.fileName,
                    func: a.functionName || "?",
                    args: a.args || [],
                    line: a.lineNumber,
                    column: a.columnNumber
                });
            return {
                parsedStack: {
                    name: e.name,
                    message: e.message,
                    url: W(),
                    stack: n,
                    originStack: e.stack
                },
                labels: {
                    pubAppName: o,
                    resourceId: i
                }
            }
        } catch (t) {
            return vr(t),
            {
                parsedStack: {
                    name: e.name,
                    message: e.message,
                    url: W(),
                    stack: [],
                    originStack: e.stack
                },
                labels: br()
            }
        }
    }
    var Zt = Object.prototype.toString
      , er = function(e) {
        if (void 0 === e)
            return "undefined";
        if (null === e)
            return "null";
        var t = typeof e;
        if ("boolean" === t)
            return "boolean";
        if ("string" === t)
            return "string";
        if ("number" === t)
            return "number";
        if ("symbol" === t)
            return "symbol";
        if ("function" === t)
            return "GeneratorFunction" === tr(e) ? "generatorfunction" : "function";
        if (function(e) {
            return Array.isArray ? Array.isArray(e) : e instanceof Array
        }(e))
            return "array";
        if (function(e) {
            if (e.constructor && "function" == typeof e.constructor.isBuffer)
                return e.constructor.isBuffer(e);
            return !1
        }(e))
            return "buffer";
        if (function(e) {
            try {
                if ("number" == typeof e.length && "function" == typeof e.callee)
                    return !0
            } catch (e) {
                if (-1 !== e.message.indexOf("callee"))
                    return !0
            }
            return !1
        }(e))
            return "arguments";
        if (function(e) {
            return e instanceof Date || "function" == typeof e.toDateString && "function" == typeof e.getDate && "function" == typeof e.setDate
        }(e))
            return "date";
        if (function(e) {
            return e instanceof Error || "string" == typeof e.message && e.constructor && "number" == typeof e.constructor.stackTraceLimit
        }(e))
            return "error";
        if (function(e) {
            return e instanceof RegExp || "string" == typeof e.flags && "boolean" == typeof e.ignoreCase && "boolean" == typeof e.multiline && "boolean" == typeof e.global
        }(e))
            return "regexp";
        switch (tr(e)) {
        case "Symbol":
            return "symbol";
        case "Promise":
            return "promise";
        case "WeakMap":
            return "weakmap";
        case "WeakSet":
            return "weakset";
        case "Map":
            return "map";
        case "Set":
            return "set";
        case "Int8Array":
            return "int8array";
        case "Uint8Array":
            return "uint8array";
        case "Uint8ClampedArray":
            return "uint8clampedarray";
        case "Int16Array":
            return "int16array";
        case "Uint16Array":
            return "uint16array";
        case "Int32Array":
            return "int32array";
        case "Uint32Array":
            return "uint32array";
        case "Float32Array":
            return "float32array";
        case "Float64Array":
            return "float64array"
        }
        if (function(e) {
            return "function" == typeof e.throw && "function" == typeof e.return && "function" == typeof e.next
        }(e))
            return "generator";
        switch (t = Zt.call(e)) {
        case "[object Object]":
            return "object";
        case "[object Map Iterator]":
            return "mapiterator";
        case "[object Set Iterator]":
            return "setiterator";
        case "[object String Iterator]":
            return "stringiterator";
        case "[object Array Iterator]":
            return "arrayiterator"
        }
        return t.slice(8, -1).toLowerCase().replace(/\s/g, "")
    };
    function tr(e) {
        return e.constructor ? e.constructor.name : null
    }
    const rr = Symbol.prototype.valueOf;
    var nr = function(e, t) {
        switch (er(e)) {
        case "array":
            return e.slice();
        case "object":
            return Object.assign({}, e);
        case "date":
            return new e.constructor(Number(e));
        case "map":
            return new Map(e);
        case "set":
            return new Set(e);
        case "buffer":
            return function(e) {
                const t = e.length
                  , r = Buffer.allocUnsafe ? Buffer.allocUnsafe(t) : Buffer.from(t);
                return e.copy(r),
                r
            }(e);
        case "symbol":
            return function(e) {
                return rr ? Object(rr.call(e)) : {}
            }(e);
        case "arraybuffer":
            return function(e) {
                const t = new e.constructor(e.byteLength);
                return new Uint8Array(t).set(new Uint8Array(e)),
                t
            }(e);
        case "float32array":
        case "float64array":
        case "int16array":
        case "int32array":
        case "int8array":
        case "uint16array":
        case "uint32array":
        case "uint8clampedarray":
        case "uint8array":
            return function(e, t) {
                return new e.constructor(e.buffer,e.byteOffset,e.length)
            }(e);
        case "regexp":
            return function(e) {
                const t = void 0 !== e.flags ? e.flags : /\w+$/.exec(e) || void 0
                  , r = new e.constructor(e.source,t);
                return r.lastIndex = e.lastIndex,
                r
            }(e);
        case "error":
            return Object.create(e);
        default:
            return e
        }
    }
      , or = Object.prototype.toString
      , ir = function(e) {
        if (void 0 === e)
            return "undefined";
        if (null === e)
            return "null";
        var t = typeof e;
        if ("boolean" === t)
            return "boolean";
        if ("string" === t)
            return "string";
        if ("number" === t)
            return "number";
        if ("symbol" === t)
            return "symbol";
        if ("function" === t)
            return "GeneratorFunction" === ar(e) ? "generatorfunction" : "function";
        if (function(e) {
            return Array.isArray ? Array.isArray(e) : e instanceof Array
        }(e))
            return "array";
        if (function(e) {
            if (e.constructor && "function" == typeof e.constructor.isBuffer)
                return e.constructor.isBuffer(e);
            return !1
        }/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
        (e))
            return "buffer";
        if (function(e) {
            try {
                if ("number" == typeof e.length && "function" == typeof e.callee)
                    return !0
            } catch (e) {
                if (-1 !== e.message.indexOf("callee"))
                    return !0
            }
            return !1
        }(e))
            return "arguments";
        if (function(e) {
            return e instanceof Date || "function" == typeof e.toDateString && "function" == typeof e.getDate && "function" == typeof e.setDate
        }(e))
            return "date";
        if (function(e) {
            return e instanceof Error || "string" == typeof e.message && e.constructor && "number" == typeof e.constructor.stackTraceLimit
        }(e))
            return "error";
        if (function(e) {
            return e instanceof RegExp || "string" == typeof e.flags && "boolean" == typeof e.ignoreCase && "boolean" == typeof e.multiline && "boolean" == typeof e.global
        }(e))
            return "regexp";
        switch (ar(e)) {
        case "Symbol":
            return "symbol";
        case "Promise":
            return "promise";
        case "WeakMap":
            return "weakmap";
        case "WeakSet":
            return "weakset";
        case "Map":
            return "map";
        case "Set":
            return "set";
        case "Int8Array":
            return "int8array";
        case "Uint8Array":
            return "uint8array";
        case "Uint8ClampedArray":
            return "uint8clampedarray";
        case "Int16Array":
            return "int16array";
        case "Uint16Array":
            return "uint16array";
        case "Int32Array":
            return "int32array";
        case "Uint32Array":
            return "uint32array";
        case "Float32Array":
            return "float32array";
        case "Float64Array":
            return "float64array"
        }
        if (function(e) {
            return "function" == typeof e.throw && "function" == typeof e.return && "function" == typeof e.next
        }(e))
            return "generator";
        switch (t = or.call(e)) {
        case "[object Object]":
            return "object";
        case "[object Map Iterator]":
            return "mapiterator";
        case "[object Set Iterator]":
            return "setiterator";
        case "[object String Iterator]":
            return "stringiterator";
        case "[object Array Iterator]":
            return "arrayiterator"
        }
        return t.slice(8, -1).toLowerCase().replace(/\s/g, "")
    };
    function ar(e) {
        return e.constructor ? e.constructor.name : null
    }
    function sr(e) {
        return !0 == (null != (t = e) && "object" == typeof t && !1 === Array.isArray(t)) && "[object Object]" === Object.prototype.toString.call(e);
        var t
    }
    function cr(e, t) {
        switch (ir(e)) {
        case "object":
            return function(e, t) {
                if ("function" == typeof t)
                    return t(e);
                if (t || (r = e,
                !1 !== sr(r) && "function" == typeof (n = r.constructor) && !1 !== sr(o = n.prototype) && !1 !== o.hasOwnProperty("isPrototypeOf"))) {
                    const r = new e.constructor;
                    for (let n in e)
                        r[n] = cr(e[n], t);
                    return r
                }
                var r, n, o;
                return e
            }(e, t);
        case "array":
            return function(e, t) {
                const r = new e.constructor(e.length);
                for (let n = 0; e.length > n; n++)
                    r[n] = cr(e[n], t);
                return r
            }(e, t);
        default:
            return nr(e)
        }
    }
    var ur = cr;
    class lr {
        constructor(e) {
            this.eventListeners = {},
            this.target = e
        }
        static getInstance(e=window) {
            return this.instance && this.instance.target === e || (this.instance = new lr(e)),
            this.instance
        }
        on(e, t) {
            return Te({
                event: e,
                listener: t,
                eachCallback: ({eventName: e, listener: t})=>(this.eventListeners = this.eventListeners || {},
                ee(this.eventListeners[e]) !== o.ARRAY ? (this.eventListeners[e] = [t],
                this) : 10 > this.eventListeners[e].length ? void this.eventListeners[e].push(t) : (Ce.error("[pubsub]: The same topic allows up to 10 listeners to be subscribed!"),
                this))
            }),
            this
        }
        off(e, t) {
            return Te({
                event: e,
                listener: t,
                eachCallback: ({eventName: e})=>{
                    this.eventListeners = this.eventListeners || {};
                    const r = this.eventListeners[e];
                    if (t) {
                        const e = r.indexOf(t);
                        e > -1 && r.splice(e, 1)
                    } else
                        this.eventListeners[e] = []
                }
            }),
            this
        }
        emit(e, t=null) {
            return Te({
                event: e,
                eachCallback: ({eventName: e})=>this.fireEvent(e, t)
            }),
            this
        }
        emitResult(e, t=null, r) {
            let n = [];
            return Te({
                event: e,
                eachCallback: ({eventName: e})=>{
                    n = this.fireEvent(e, t)
                }
            }),
            r && ee(r) === o.FUNC ? r(n) : this
        }
        emitDebounce() {
            return Ce.warn('"pubsub.emitDebounce" has been deprecated, please use "pubsub.emit" and achieve "debounce" by yourself!'),
            this
        }
        emitThrottle() {
            return Ce.warn('"pubsub.emitThrottle" has been deprecated, please use "pubsub.emit" and achieve "throttle" by yourself!'),
            this
        }
        destroy() {
            Object.keys(this.eventListeners || {}).forEach((e=>this.off(e))),
            lr.instance = null,
            this.target = null,
            this.eventListeners = null
        }
        fireEvent(e, t) {
            var r;
            const n = {
                detail: ur(t),
                feBu: null !== (r = null == t ? void 0 : t.feBu) && void 0 !== r ? r : br().pubAppName
            };
            this.eventListeners = this.eventListeners || {};
            const i = this.eventListeners[e];
            return ee(i) === o.ARRAY ? i.map((e=>{
                let t = null;
                try {
                    t = e(n)
                } catch (e) {
                    throw e
                }
                return t
            }
            )) : []
        }
    }
    function fr(e, t) {
        return !0 === lr.getInstance().emitResult(e, t, (e=>e.includes(!0)))
    }
    function dr(e, t) {
        if (e && !ue(e))
            if ((null == e ? void 0 : e.error) && ee(null == e ? void 0 : e.error) !== o.STRING) {
                const {parsedStack: r, labels: n} = Yt(e.error, t.maxStackDepth)
                  , o = n.pubAppName
                  , i = e.feBu || e.pubAppName;
                hr(Object.assign(Object.assign({}, r), {
                    feBu: i || o,
                    resourceId: e.resourceId || n.resourceId,
                    timestamp: K(!0),
                    traceType: e.traceType || u.ERRORTRACE,
                    errorLevel: e.errorLevel
                }), t, e.labels)
            } else {
                const r = br();
                hr({
                    message: e.message,
                    name: e.name,
                    url: e.filename,
                    feBu: e.feBu || e.pubAppName || r.pubAppName,
                    resourceId: e.resourceId || r.resourceId,
                    timestamp: K(!0),
                    traceType: e.traceType || u.ERRORTRACE,
                    errorLevel: e.errorLevel
                }, t, e.labels)
            }
    }
    let pr;
    function hr(e, t, r, n) {
        if (fr(T.error, e) || !e.name && !e.message || E.includes(e.message) || k.includes(e.originStack))
            return;
        const o = wr.getInstance();
        if (o.getCurrentLogCount() < t.maxLogCount) {
            const t = Xe.getErrorQueue()
              , i = br()
              , a = e.feBu || r && r.pubAppName || i.pubAppName
              , s = Z(a);
            if (t.push(Object.assign(Object.assign({}, e), {
                name: e.name || h,
                message: e.message || g,
                feBu: a,
                resourceId: e.resourceId || i.resourceId || s.ps,
                serviceWithStage: s.pv,
                _uniqueId: e._uniqueId || ne(),
                labels: r,
                level: n
            })),
            o.increaseCurrentLogCount(),
            t.size() >= 100)
                return pr.cancel(),
                pr = null,
                gr();
            pr || (pr = Ge(2e4, gr)),
            pr()
        }
    }
    function gr(e) {
        return R(this, void 0, void 0, (function*() {
            const t = Xe.getErrorQueue();
            if (0 >= t.size())
                return;
            const r = wr.getInstance().getOptions();
            Jt(r.newExceptionApiUrl, Ir({
                resource: t.list()
            }, r), {
                useBeacon: e,
                useGzip: !e && !0
            }),
            t.clear()
        }
        ))
    }
    function mr(e, t) {
        return R(this, void 0, void 0, (function*() {
            try {
                if (!(e instanceof Error))
                    return Ce.warn("'.sendError' Expected error, but received " + ee(e));
                const r = wr.getInstance().getOptions()
                  , n = q(r, t || {});
                dr(Object.assign(Object.assign({}, t), {
                    error: e
                }), n)
            } catch (e) {
                vr(e)
            }
        }
        ))
    }
    function yr(e, t) {
        return R(this, void 0, void 0, (function*() {
            const r = wr.getInstance().getOptions()
              , n = q(r, t || {});
            try {
                if (Array.isArray(e))
                    return e.forEach((e=>{
                        if (e) {
                            if (Array.isArray(e.error))
                                return e.error.forEach((t=>{
                                    t instanceof Error && dr(Object.assign(Object.assign({}, e.labels), {
                                        error: t,
                                        labels: e.labels,
                                        level: e.level
                                    }), n)
                                }
                                ));
                            e.error instanceof Error && dr(Object.assign(Object.assign({}, e.labels), e), n)
                        }
                    }
                    ));
                if (e) {
                    if (Array.isArray(e.error))
                        return e.error.forEach((t=>{
                            t instanceof Error && dr(Object.assign(Object.assign({}, e.labels), {
                                labels: e.labels,
                                level: e.level,
                                error: t
                            }), n)
                        }
                        ));
                    e.error instanceof Error && dr(Object.assign(Object.assign({}, e.labels), {
                        labels: e.labels,
                        level: e.level,
                        error: e.error
                    }), n)
                }
            } catch (e) {
                vr(e)
            }
        }
        ))
    }
    function vr(e) {
        yr({
            error: e,
            labels: {
                pubAppName: "qunhe-monitor-ktracker-index"
            }
        })
    }
    function br() {
        const e = {
            pubAppName: Ae(),
            resourceId: ""
        };
        try {
            const t = Qe(Error());
            for (const [r,{pubAppName: n, resourceId: o}] of t.entries())
                if (n && o)
                    return e.pubAppName = n,
                    e.resourceId = o,
                    e;
            return e
        } catch (t) {
            return vr(t),
            e
        }
    }
    class wr {
        constructor() {
            this.g_ktrackerCurrentLogCount = 0
        }
        static getInstance() {
            return wr.instance || (wr.instance = new wr),
            wr.instance
        }
        getCurrentLogCount() {
            return this.g_ktrackerOptions && this.g_ktrackerOptions.debug && Ce.primary(`max error log count: ${this.g_ktrackerOptions.maxLogCount}; current error log count: ${this.g_ktrackerCurrentLogCount}`),
            this.g_ktrackerCurrentLogCount
        }
        setCurrentLogCount(e=0) {
            this.g_ktrackerCurrentLogCount = e
        }
        increaseCurrentLogCount() {
            this.g_ktrackerCurrentLogCount++
        }
        getOptions() {
            return this.g_ktrackerOptions
        }
        setOptions(e) {
            this.g_ktrackerOptions = e
        }
        clearOptions() {
            this.g_ktrackerOptions = void 0
        }
        getVisitId() {
            return this.g_ktrackerVisitId
        }
        setVisitId(e) {
            this.g_ktrackerVisitId = e
        }
    }
    function Tr() {
        const e = window.g_ktrackerOptions || {}
          , t = window.ktrackerOptions || {}
          , r = q(t, e)
          , n = function(e, t) {
            const r = Object.assign({}, t);
            for (const n of Object.keys(e)) {
                let o;
                if (o = t.hasOwnProperty(n) ? t[n] : X(n),
                void 0 !== o && "" !== o)
                    switch (o) {
                    case "true":
                    case !0:
                        r[n] = !0;
                        break;
                    case "false":
                    case !1:
                        r[n] = !1;
                        break;
                    default:
                        const e = parseInt(o, 10);
                        r[n] = Number.isInteger(e) ? e : o
                    }
                else
                    r[n] = e[n]
            }
            return r
        }(_e, r);
        return wr.getInstance().setOptions(n),
        n
    }
    function Ir(e, t, r, n) {
        if (!e || "object" != typeof e)
            return {};
        const o = Ae()
          , i = {};
        r && Object.keys(r).forEach((e=>{
            r[e] && (i[e] = r[e])
        }
        ));
        const a = br()
          , s = i.pubAppName || i.feBu || a.pubAppName || o
          , c = Z(s);
        return Object.assign(e, {
            viewport: t.getViewport ? {
                width: Math.max(document.documentElement.clientWidth, window.innerWidth || 0),
                height: Math.max(document.documentElement.clientHeight, window.innerHeight || 0)
            } : {},
            ua: re,
            serviceWithStage: c.pv,
            resourceId: e.resourceId || a.resourceId || c.ps,
            pfeBu: o,
            feBu: s,
            feVersion: X("feVersion"),
            refer: J(),
            url: W(),
            browserId: ae(),
            visitId: z,
            qhdi: ae(),
            userId: Y(),
            designId: window.g_designId,
            levelId: window.g_levelId,
            userLevel: xe("userLevel", e, Se()),
            obsRootAccountId: xe("obsRootAccountId", e, window.g_sessionAccount ? window.g_sessionAccount.obsRootAccountId : window.__TOOL_CONFIG__ && window.__TOOL_CONFIG__.obsRootAccountId || null),
            labels: i,
            level: n
        })
    }
    let Er, kr;
    function Or(e, t) {
        return R(this, void 0, void 0, (function*() {
            const r = wr.getInstance().getOptions();
            let n, o;
            switch (e) {
            case "actionstat":
                n = Xe.getActionstatQueue(),
                o = r.multiActionstatUrl;
                break;
            case "actiontrack":
                n = Xe.getActiontrackQueue(),
                o = r.multiActiontrackUrl
            }
            n && n.size() && (Jt(o, JSON.stringify(n.list()), {
                useBeacon: t,
                isJson: !0
            }),
            n.clear())
        }
        ))
    }
    function Ar(e, t, r, n, o) {
        return R(this, void 0, void 0, (function*() {
            try {
                r || (r = {});
                const o = wr.getInstance().getOptions()
                  , i = q(o, r || {})
                  , a = Z()
                  , s = {
                    eventType: e,
                    _action_behavior: e,
                    payload: t,
                    ua: re,
                    serviceWithStage: i.serviceWithStage || a.pv,
                    refer: J(),
                    url: W(),
                    browserId: ae(),
                    visitId: z,
                    userId: Y()
                };
                0;
                const c = Xe.getActiontrackQueue();
                if (c.push(s),
                c.size() >= 45)
                    return kr.cancel(),
                    kr = null,
                    Or("actiontrack");
                kr || (kr = Ge(2e4, Or)),
                kr("actiontrack"),
                "function" == typeof n && n(!0)
            } catch (e) {
                vr(e)
            }
        }
        ))
    }
    function Sr(e, t) {
        t || (t = {});
        const r = wr.getInstance().getOptions()
          , n = q(r, t);
        if (!(ee(e.data) === o.OBJECT))
            return;
        let i = Object.assign(Object.assign(Object.assign(Object.assign({
            eventType: e.eventType,
            _action_behavior: e.eventType
        }, e.labels || {}), {
            level: e.level,
            _saveRaw: t.saveRaw
        }), e.data), {
            __MonitorMetricPayload__: ye(e.data)
        });
        return i = Ir(i, n, null == e ? void 0 : e.labels),
        delete i.labels,
        delete i.viewport,
        i
    }
    function xr(e, t, r, n) {
        return R(this, void 0, void 0, (function*() {
            try {
                0;
                const n = Xe.getActiontrackQueue();
                if (n.push(Sr(e, t)),
                n.size() >= 45)
                    return kr.cancel(),
                    kr = null,
                    Or("actiontrack");
                kr || (kr = Ge(2e4, Or)),
                kr("actiontrack"),
                "function" == typeof r && r(!0)
            } catch (e) {
                vr(e)
            }
        }
        ))
    }
    function jr(e, t, r, n) {
        return R(this, void 0, void 0, (function*() {
            try {
                0;
                const n = Xe.getActionstatQueue();
                if (n.push(Sr(e, t)),
                n.size() >= 45)
                    return Er.cancel(),
                    Er = null,
                    Or("actionstat");
                Er || (Er = Ge(2e4, Or)),
                Er("actionstat"),
                "function" == typeof r && r(!0)
            } catch (e) {
                vr(e)
            }
        }
        ))
    }
    const Rr = (e,t)=>{
        const r = wr.getInstance().getOptions()
          , n = e instanceof Error ? e : e.reason;
        n instanceof Error && ((null == r ? void 0 : r.debug) && n && Ce.error("window unhandledrejection handler: " + n),
        dr({
            error: n,
            message: n || "unhandled rejection",
            name: e instanceof Error ? e.name : e.type,
            url: W(),
            errorLevel: t ? "console exception" : "promise exception"
        }, r))
    }
    ;
    let Nr, _r;
    const Cr = ["SCRIPT", "LINK", "VIDEO", "AUDIO"];
    function Lr() {
        const e = wr.getInstance().getOptions();
        if (!e.initException)
            return;
        const t = H.getInstance();
        if (t.getState("hasExceptionInit"))
            return Ce.info("exception collector loaded, please do not load repeatedly!");
        t.setState({
            exceptionMonitorInitStart: K()
        }),
        Nr = console.error,
        console.error = (...e)=>(e.forEach((e=>{
            e && e instanceof Error && Rr(e, !0)
        }
        )),
        Nr.call(console, ...e)),
        _r = e=>{
            const t = wr.getInstance().getOptions()
              , r = e.target
              , n = r.tagName;
            if (r !== window && !Cr.includes(n))
                return;
            let i = e;
            if (n && Cr.includes(n)) {
                const e = function(e) {
                    return "LINK" === e ? "href" : "src"
                }(n);
                if (!he(e))
                    return;
                i = {
                    message: r[e] + " Load Error",
                    name: r.tagName + "LoadError",
                    feBu: ie("pn", r[e]),
                    resourceId: ie("ps", r[e])
                }
            }
            const {message: a, error: s} = i;
            (null == t ? void 0 : t.debug) && s && Ce.error("window error handler: " + s),
            ee(a) === o.STRING && a.includes(o.INVALID_ERROR) || (i.errorLevel = "global exception",
            dr(i, t))
        }
        ,
        window.addEventListener("error", _r, !0),
        e.getUnhandledrejection && window.addEventListener("unhandledrejection", Rr, !1),
        t.setState({
            hasExceptionInit: !0,
            exceptionMonitorInitEnd: K()
        }),
        Ce.success("exception collector loaded")
    }
    function Mr() {
        const e = H.getInstance();
        e.getState("hasExceptionInit") && (e.setState({
            hasExceptionInit: !1
        }),
        wr.getInstance().setCurrentLogCount(0),
        Nr && console.error !== Nr && (console.error = Nr,
        Nr = null),
        window.removeEventListener("error", _r, !0),
        _r = null,
        window.removeEventListener("unhandledrejection", Rr, !1),
        Ce.success("exception collector unloaded"))
    }
    function Ur(e, t) {
        const r = Xe.getTraceQueue()
          , n = e._uniqueId || ne();
        if (r.push(Object.assign(Object.assign({}, e), {
            _uniqueId: n
        })),
        r.size() >= 100)
            return Br()
    }
    function Br(e) {
        const t = Xe.getTraceQueue();
        if (0 >= t.size())
            return;
        const r = wr.getInstance().getOptions();
        Jt(r.traceApiUrl, Ir({
            resource: t.list()
        }, r), {
            useBeacon: e,
            useGzip: !e && !0
        }),
        t.clear()
    }
    function Pr(e) {
        const t = Xe.getXHRQueue();
        if (0 >= t.size())
            return;
        const r = wr.getInstance().getOptions()
          , n = t.list();
        Jt(r.performanceApiUrl, Ir({
            resource: n
        }, r), {
            useBeacon: e,
            useGzip: !e && !0
        }),
        t.clear()
    }
    function qr(t, r) {
        const {isFail: n, justForTrace: o} = Object.assign({
            isFail: !1,
            justForTrace: !1
        }, r)
          , i = wr.getInstance().getOptions()
          , {apiType: a, hasFixTime: s} = t;
        i.debug && Ce.info(`${a} error[url: ${t.api}, TraceId: ${t.traceId}]`);
        const c = K(s);
        if (n) {
            const {errorName: r, errorMessage: n} = e[a];
            t.name = r,
            t.message = n,
            t.api = t.url
        } else
            t.name = t.url || "";
        const l = Z(t.feBu)
          , f = {
            name: t.name,
            message: t.message,
            entryType: a,
            eventType: t.eventType,
            traceType: u.HTTPTRACE,
            url: W(),
            timestamp: c,
            feBu: t.feBu,
            serviceWithStage: l.pv,
            startTime: t.startTime,
            _uniqueId: t._uniqueId,
            xhrDetail: {
                method: t.method,
                api: t.api,
                traceId: t.traceId,
                async: t.async,
                statusCode: t.statusCode,
                hunterId: t.hunterId
            }
        };
        if (["ajaxResponse", "fetchResponse"].includes(t.eventType) && (f.duration = c - t.startTime),
        i.initTraceCollector && (Ur(f),
        o))
            return;
        if (fr(T.api, f) || I.includes(t.statusCode))
            return;
        n && !fr(T.apiError, f) && hr(f, i);
        const d = Xe.getXHRQueue();
        return d.push(f),
        100 > d.size() ? void 0 : Pr()
    }
    function Dr(e, t) {
        return qr(Object.assign(Object.assign({}, t), {
            statusCode: e.status,
            statusText: e.statusText,
            traceType: u.HTTPTRACE
        }), {
            isFail: !Ie(e.status)
        }),
        e
    }
    let Fr, Qr, Hr;
    const $r = {
        other: 0,
        img: 1,
        link: 2,
        script: 3,
        css: 4,
        xmlhttprequest: 5,
        html: 6,
        image: 7
    }
      , zr = [];
    function Kr(e, t) {
        "number" != typeof e && (e = 0),
        "number" != typeof t && (t = 0);
        const r = Math.round(e || 0);
        return 0 === r ? 0 : r - Math.round(t || 0)
    }
    function Gr(e) {
        return "number" == typeof e && 0 !== e ? e.toString(36) : "string" == typeof e ? e : ""
    }
    function Xr(e) {
        let t, r, n, o;
        return e.encodedBodySize || e.decodedBodySize || e.transferSize ? (t = e.transferSize,
        r = e.encodedBodySize,
        n = e.decodedBodySize,
        o = [r, t ? t - r : "_", n ? n - r : 0],
        o.map(Gr).join(",").replace(/,+$/, "")) : ""
    }
    function Wr(e, t) {
        let r, n, o;
        if (e && t)
            for (r = 0; t.length > r; r++)
                if (o = t[r],
                "string" == typeof o) {
                    if (n = e.indexOf(o),
                    -1 !== n) {
                        e = e.substr(0, n + o.length) + "...";
                        break
                    }
                } else
                    o instanceof RegExp && o.test(e) && (e = e.replace(o, "$1") + "...");
        return function(e, t) {
            let r;
            return e && "[object Array]" !== Object.prototype.toString.call(e) ? (void 0 !== t && e && e.length > t && (r = e.indexOf("?"),
            e = -1 !== r && t > r ? e.substr(0, r) + "?..." : e.substr(0, t - 3) + "..."),
            e) : ""
        }(e, 500)
    }
    function Vr(e, t, r) {
        let n, o, i, a, s;
        const c = {}
          , u = function(e) {
            const t = {}
              , r = e.document
              , n = void 0 !== e.pageXOffset ? e.pageXOffset : (r.documentElement || r.body.parentNode || r.body).scrollLeft
              , o = void 0 !== e.pageYOffset ? e.pageYOffset : (r.documentElement || r.body.parentNode || r.body).scrollTop;
            return ["IMG", "IFRAME", "IMAGE"].forEach((function(e) {
                const i = r.getElementsByTagName(e);
                let a, s, c, u;
                for (s = 0; i.length > s; s++)
                    a = i[s],
                    a && (u = a.getAttribute("src") || a.getAttribute("xlink:href"),
                    u && !t[u] && (c = a.getBoundingClientRect(),
                    (c.height || a.offsetHeight) && (c.width || a.offsetWidth) && (t[u] = [a.offsetHeight, a.offsetWidth, Math.round(c.top + o), Math.round(c.left + n)])))
            }
            )),
            t
        }(e);
        for (n = 0; t.length > n; n++) {
            if (o = t[n],
            !o || !o.initiatorType || r && !r.includes(o.initiatorType))
                continue;
            i = $r[o.initiatorType],
            void 0 === i && (i = 0),
            s = i + [Kr(o.startTime, 0), Kr(o.responseEnd, o.startTime), Kr(o.responseStart, o.startTime), Kr(o.requestStart, o.startTime), Kr(o.connectEnd, o.startTime), Kr(o.secureConnectionStart, o.startTime), Kr(o.connectStart, o.startTime), Kr(o.domainLookupEnd, o.startTime), Kr(o.domainLookupStart, o.startTime), Kr(o.redirectEnd, o.startTime), Kr(o.redirectStart, o.startTime)].map(Gr).join(",").replace(/,+$/, "");
            const e = Xr(o);
            "" !== e && (s += "*1" + e),
            a = Wr(o.name, zr),
            void 0 !== c[a] ? c[a] += "|" + s : c[a] = void 0 !== u[a] ? "*0" + u[a].map(Gr).join(",").replace(/,+$/, "") + "|" + s : s
        }
        return c
    }
    function Jr(e={}, t) {
        const r = e[t] || 0;
        return "downlink" === t ? Number.parseFloat(r.toFixed(2)) : r
    }
    function Yr(e=["downlink", "effectiveType"]) {
        try {
            const t = me(["navigator", "connection"]) ? navigator.connection : {};
            return "string" == typeof e ? Jr(t, e) : Array.isArray(e) ? e.reduce(((e,r)=>Object.assign(Object.assign({}, e), {
                [r]: Jr(t, r)
            })), {}) : {}
        } catch (e) {
            return {}
        }
    }
    var Zr;
    let en;
    function tn(e, t) {
        return R(this, void 0, void 0, (function*() {
            const r = H.getInstance();
            let n = {};
            en && (clearTimeout(en),
            en = null);
            let o = {};
            if (e.getPagePerformance && ue(o) && me("timing") && (o = window.performance.timing,
            n.timeOrigin = window.performance.timeOrigin),
            t === Zr.pageLoad) {
                let t = 0;
                if (ue(o) || (t = Kr(o.loadEventStart, o.fetchStart)),
                e.slowThreshold > t && window.g_designId)
                    return void (en = setTimeout((()=>tn(e)), e.loadedThreshold));
                e.slowThreshold > t || r.setState({
                    isSlowPage: !0
                })
            }
            let i = [];
            if (me("getEntriesByType")) {
                i = function(e, t) {
                    if (!e || ue(e))
                        return [];
                    const r = Xe.getResourceSrcQueue();
                    return Object.keys(e).reduce(((n,o)=>{
                        if (t(o) && !r.includes(o)) {
                            r.push(o);
                            const t = ie("pn", o);
                            return Object.assign(Object.assign({}, n), {
                                [o]: {
                                    feBu: t || Ae(),
                                    timing: e[o]
                                }
                            })
                        }
                        return n
                    }
                    ), {})
                }(Vr(window, window.performance.getEntriesByType("resource")), (e=>he(e)))
            }
            e.getPagePerformance && e.getResourcePerformance && r.getState("isSlowPage") && (n.isSlowPage = !0,
            function(e) {
                if (!e.getResourcePerformance)
                    return !1;
                const t = H.getInstance();
                return !!t.getState("isSlowPage") && (!e.enableBrowserSample || t.getState("isExceedThresholdInit"))
            }(e) && (n.resource = i)),
            n.resource || (n.resource = []),
            n.network || (n.network = Yr()),
            Jt(e.performanceApiUrl, Ir(Object.assign(Object.assign({}, n), {
                page: o
            }), e), {
                useGzip: !0
            }),
            n = null
        }
        ))
    }
    function rn() {
        !function() {
            const e = wr.getInstance().getOptions()
              , t = se(e.ktrackerInitTimeKey);
            if (!e.enableBrowserSample)
                return t && ce(e.ktrackerInitTimeKey, "", 0);
            const r = Number.parseFloat(t)
              , n = K();
            !Number.isNaN(r) && e.browserSampleThreshold > n - r || (H.getInstance().setState({
                isExceedThresholdInit: !0
            }),
            e.debug && Ce.success(`\n        Last Initialization Time：${r}；\n        Current Initialization Time：${n}；\n        Initialization interval：${n - r}；\n      `),
            ce(e.ktrackerInitTimeKey, n, 1e3))
        }();
        tn(wr.getInstance().getOptions(), Zr.pageLoad)
    }
    !function(e) {
        e.pageLoad = "PAGE_LOAD",
        e.designLoad = "DESIGN_LOAD"
    }(Zr || (Zr = {}));
    const nn = [];
    function on({detail: e={}}={}) {
        try {
            const {type: t} = e
              , r = function(e, t) {
                var r = {};
                for (var n in e)
                    Object.prototype.hasOwnProperty.call(e, n) && 0 > t.indexOf(n) && (r[n] = e[n]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var o = 0;
                    for (n = Object.getOwnPropertySymbols(e); n.length > o; o++)
                        0 > t.indexOf(n[o]) && Object.prototype.propertyIsEnumerable.call(e, n[o]) && (r[n[o]] = e[n[o]])
                }
                return r
            }(e, ["type"]);
            if ("loadStart" === t)
                nn.length || nn.push(Object.assign(Object.assign({}, r), {
                    loadStartTime: K(),
                    loadStartNetwork: Yr("downlink")
                }));
            else if (["loadEnd", "loadError"].includes(t)) {
                const r = nn.pop();
                if (r && r.loadStartTime) {
                    const n = wr.getInstance().getOptions()
                      , o = K()
                      , i = o - parseFloat(r.loadStartTime);
                    if ("loadError" === t && e.errorMsg) {
                        const {parsedStack: t, labels: o} = Yt(e.errorMsg, n.maxStackDepth);
                        r.name = t.name,
                        r.message = t.message,
                        r.feBu = o.pubAppName
                    }
                    if (i >= n.slowThreshold) {
                        H.getInstance().setState({
                            isSlowPage: !0
                        })
                    }
                    xr({
                        eventType: "designLoadPoint",
                        data: {
                            loadCost: i
                        },
                        labels: Object.assign(Object.assign({}, r), {
                            designId: window.g_designId,
                            loadEndTime: "" + o,
                            loadEndNetwork: Yr("downlink")
                        })
                    }, {
                        saveRaw: !0
                    })
                }
            }
        } catch (e) {
            vr(e)
        }
    }
    let an, sn, cn;
    function un() {
        an && (clearTimeout(an),
        an = null),
        cn && (window.cancelIdleCallback(cn),
        cn = null),
        rn()
    }
    function ln() {
        sn && (clearTimeout(sn),
        sn = null);
        H.getInstance().setState({
            pageLoadEnd: K()
        });
        const e = wr.getInstance().getOptions();
        window.requestIdleCallback ? cn = window.requestIdleCallback(un) : an = setTimeout(un, e.performanceDelay)
    }
    function fn() {
        const e = wr.getInstance().getOptions();
        if (!e.initPagePerformance)
            return;
        const i = H.getInstance();
        if (i.getState("hasPerformanceInit"))
            return Ce.info("performance collector loaded, please do not load repeatedly!");
        i.setState({
            performanceMonitorInitStart: K()
        }),
        sn = setTimeout((()=>ln), e.loadedThreshold),
        window.addEventListener("load", ln, !1),
        me("XMLHttpRequest") && e.getAjaxPerformance && function() {
            const e = wr.getInstance().getOptions();
            ({open: Qr, send: Hr} = window.XMLHttpRequest.prototype),
            window.XMLHttpRequest.prototype.open = function(o, i, a) {
                const s = H.getInstance();
                this.url = i,
                this.method = o,
                this.api = le(i),
                this.async = a,
                this.traceId = oe(e.trace128bit),
                this.pMark = !Oe(this.api) && he(this.api),
                this.feBu = br().pubAppName,
                this.hasFixTime = void 0 !== s.getState("adjustTimeDiff"),
                this.startTime = K(this.hasFixTime),
                this._uniqueId = ne(),
                this.pMark && (e.debug && Ce.info("ajax opened[url: " + this.api + ", TraceId: " + this.traceId + "]"),
                e.initTraceCollector && qr({
                    url: this.url,
                    api: this.api,
                    feBu: this.feBu,
                    method: this.method,
                    traceId: this.traceId,
                    startTime: this.startTime,
                    apiType: "ajax",
                    eventType: "ajaxRequest",
                    async: this.async,
                    traceType: u.HTTPTRACE,
                    _uniqueId: this._uniqueId,
                    hasFixTime: this.hasFixTime
                }, {
                    justForTrace: !0
                }),
                this.addEventListener("readystatechange", (()=>{
                    1 === this.readyState && de() === fe(i) && (e.isCoohom ? (this.setRequestHeader(r, this.traceId),
                    this.setRequestHeader(n, this.traceId)) : this.setRequestHeader(t, this.traceId))
                }
                ), !1)),
                Qr.apply(this, arguments)
            }
            ,
            window.XMLHttpRequest.prototype.send = function(t) {
                this.addEventListener("readystatechange", (()=>{
                    if (e.debug && Ce.info("ajax interceptor[url: " + this.api + ", marked: " + this.pMark + "]"),
                    4 === this.readyState) {
                        const e = function(e) {
                            let t = {};
                            if (!e)
                                return t;
                            try {
                                t = e.trim().split(/[\r\n]+/).reduce(((e,t)=>{
                                    const [r,...n] = t.split(": ");
                                    return e[r] = n.join(": "),
                                    e
                                }
                                ), {})
                            } catch (e) {}
                            return t
                        }(this.getAllResponseHeaders()) || {}
                          , r = H.getInstance();
                        if (void 0 === r.getState("adjustTimeDiff") && this.api.includes(ke())) {
                            const t = +new Date(e[p]);
                            if (!Number.isNaN(t)) {
                                const e = K() - t;
                                r.setState({
                                    adjustTimeDiff: Math.abs(e) > 15e3 ? e : 0
                                })
                            }
                        }
                        this.pMark && Dr({
                            status: this.status,
                            statusText: this.statusText
                        }, {
                            url: this.url,
                            api: this.api,
                            data: t,
                            feBu: this.feBu,
                            method: this.method,
                            traceId: this.traceId,
                            startTime: this.startTime,
                            apiType: "ajax",
                            eventType: "ajaxResponse",
                            async: this.async,
                            hunterId: e[d],
                            _uniqueId: this._uniqueId,
                            hasFixTime: this.hasFixTime
                        })
                    }
                }
                )),
                Hr.call(this, t)
            }
        }(),
        me("fetch") && e.getFetchPerformance && function() {
            Fr = window.fetch;
            const e = wr.getInstance().getOptions();
            window.fetch = function(i, a={}) {
                const s = H.getInstance();
                let c, l = "", f = "GET";
                const p = K(!0)
                  , h = void 0 !== s.getState("adjustTimeDiff")
                  , g = ne();
                ee(i) === o.STRING && (l = i,
                c = a.body),
                ee(i) === o.REQUEST && (l = i.url,
                f = i.method || f,
                c = ue(a) ? i.body : a.body),
                ue(a) || (f = a.method || f);
                const m = le(l)
                  , y = oe(e.trace128bit)
                  , v = !Oe(m) && he(m)
                  , b = br().pubAppName;
                return new Promise(((s,w)=>{
                    if (v) {
                        e.debug && Ce.info("fetch opened[url: " + m + ", TraceId: " + y + "]"),
                        e.initTraceCollector && qr({
                            url: l,
                            api: m,
                            data: c,
                            feBu: b,
                            method: f,
                            traceId: y,
                            startTime: p,
                            apiType: "fetch",
                            eventType: "fetchRequest",
                            async: !0,
                            traceType: u.HTTPTRACE,
                            _uniqueId: g,
                            hasFixTime: h
                        }, {
                            justForTrace: !0
                        });
                        let s = {};
                        de() === fe(l) && (s = e.isCoohom ? {
                            [r]: y,
                            [n]: y
                        } : {
                            [t]: y
                        }),
                        ue(s) || (ee(i) === o.REQUEST && i.headers ? Object.keys(s).forEach((e=>{
                            i.headers.append(e, s[e])
                        }
                        )) : a.headers = Object.assign(Object.assign({}, a.headers), s))
                    }
                    e.debug && Ce.info("fetch interceptor[url: " + m + ", marked: " + v + "]"),
                    Fr.call(this, i, a).then((e=>{
                        if (!v)
                            return e;
                        const t = e.headers.get(d);
                        return Dr(e, {
                            url: l,
                            api: m,
                            data: c,
                            feBu: b,
                            method: f,
                            traceId: y,
                            startTime: p,
                            apiType: "fetch",
                            eventType: "fetchResponse",
                            async: !0,
                            hunterId: t,
                            _uniqueId: g,
                            hasFixTime: h
                        })
                    }
                    )).then((e=>{
                        s(e)
                    }
                    )).catch((t=>{
                        v && dr({
                            error: t,
                            feBu: b,
                            timestamp: K(!0),
                            traceType: u.HTTPTRACE
                        }, e),
                        w(t)
                    }
                    ))
                }
                ))
            }
        }(),
        lr.getInstance().on(w, on),
        i.setState({
            hasPerformanceInit: !0,
            performanceMonitorInitEnd: K()
        }),
        Ce.success("performance collector loaded")
    }
    function dn() {
        const e = H.getInstance();
        e.getState("hasPerformanceInit") && (window.removeEventListener("load", ln, !1),
        Fr && window.fetch !== Fr && (window.fetch = Fr,
        Fr = null),
        Qr && window.XMLHttpRequest.prototype.open !== Qr && (window.XMLHttpRequest.prototype.open = Qr,
        Qr = null),
        Hr && window.XMLHttpRequest.prototype.send !== Hr && (window.XMLHttpRequest.prototype.send = Hr,
        Hr = null),
        e.setState({
            hasPerformanceInit: !1
        }),
        Ce.success("performance collector unloaded"))
    }
    var pn, hn;
    !function(e) {
        e.dragEvent = "dragEvent"
    }(pn || (pn = {})),
    function(e) {
        e.drag = "drag"
    }(hn || (hn = {}));
    const gn = {
        [hn.drag]: "dragend"
    }
      , mn = ["dragstart", "dragend", "drop"]
      , yn = mn.slice(0, 1)
      , vn = mn.slice(1)
      , bn = ["CANVAS"]
      , wn = [...mn, "click", "dblclick", "keypress"]
      , Tn = {};
    function In(e) {
        const t = [];
        return Array.isArray(null == e ? void 0 : e.path) && (null == e || e.path.forEach((e=>{
            if (e && e.tagName) {
                const {tagName: r, id: n, className: o} = e;
                t.push(`${r}${n ? "#" + n : ""}${o ? "." + o : ""}`)
            }
        }
        ))),
        t.join(" <- ")
    }
    function En(e) {
        var t, r;
        const n = (null == e ? void 0 : e.isTrusted) ? null === (t = null == e ? void 0 : e.target) || void 0 === t ? void 0 : t.tagName : null == e ? void 0 : e.tagName;
        if (bn.includes(n))
            return;
        const o = wr.getInstance().getOptions()
          , i = e.type
          , a = e.target
          , s = e.isTrusted ? {
            eventType: i,
            tagName: n,
            tagId: null == a ? void 0 : a.id,
            className: null == a ? void 0 : a.className,
            title: null == a ? void 0 : a.title,
            tagValue: null == a ? void 0 : a.value,
            tagPath: In(e),
            outerHTML: null === (r = null == a ? void 0 : a.outerHTML) || void 0 === r ? void 0 : r.substr(0, 300),
            timestamp: K(!0),
            traceType: u.INPUTTRACE,
            feBu: br().pubAppName
        } : e;
        if (mn.includes(i)) {
            const e = yn.includes(i)
              , t = vn.includes(i);
            e ? function({middleEventType: e, eventHandler: t, systemOptions: r}) {
                Tn[t] || (Tn[t] = Ke(r.throttleThreshold, En),
                document.addEventListener(e, Tn[t], !1))
            }({
                middleEventType: hn.drag,
                eventHandler: pn.dragEvent,
                systemOptions: o
            }) : t && function({middleEventType: e, eventHandler: t, eventObj: r, isSameEndType: n}) {
                const o = Tn[t];
                o && (n || En(Object.assign(Object.assign({}, r), {
                    eventType: gn[e]
                })),
                document.removeEventListener(e, o, !1),
                o.cancel(),
                Tn[t] = null)
            }({
                middleEventType: hn.drag,
                eventHandler: pn.dragEvent,
                eventObj: s,
                isSameEndType: !0
            })
        }
        s.eventType && s.traceType && Ur(s)
    }
    const kn = e=>t=>{
        wr.getInstance().getOptions();
        const r = {
            eventType: e,
            traceType: u.ROUTETRACE,
            from: t.from || W(),
            fromTitle: t.fromTitle || document.title,
            to: t.to || W(),
            toTitle: t.toTitle || document.title,
            timestamp: K(!0),
            feBu: br().pubAppName
        };
        H.getInstance().setState({
            currentPageUrl: r.to,
            currentPageTitle: r.toTitle
        }),
        Ur(r)
    }
      , On = {
        pushState: void 0,
        replaceState: void 0
    }
      , An = e=>t=>{
        const r = H.getInstance();
        kn(e)(Object.assign(Object.assign({}, t), {
            from: r.getState("currentPageUrl"),
            fromTitle: r.getState("currentPageTitle"),
            to: W(),
            toTitle: document.title
        }))
    }
      , Sn = {
        popstate: An("popstate"),
        hashchange: An("hashchange")
    };
    function xn() {
        if (!wr.getInstance().getOptions().initTraceCollector)
            return;
        const e = H.getInstance();
        if (e.setState({
            traceMonitorInitStart: K()
        }),
        e.getState("hasUsertraceInit"))
            return Ce.info("trace collector loaded, please do not load repeatedly!");
        wn.forEach((e=>document.addEventListener(e, En, !1))),
        function() {
            const e = H.getInstance();
            f.forEach((t=>{
                On[t] = window.history[t],
                window.history[t] = function(r, n, i) {
                    kn(t)({
                        traceType: u.ROUTETRACE,
                        from: e.getState("currentPageUrl"),
                        fromTitle: e.getState("currentPageTitle"),
                        to: i && le(i) || W(),
                        toTitle: document.title,
                        feBu: br().pubAppName
                    });
                    const a = On[t];
                    ee(a) === o.FUNC && a.call(this, r, n, i)
                }
            }
            )),
            l.forEach((e=>window.addEventListener(e, Sn[e], !1)))
        }(),
        e.setState({
            hasUsertraceInit: !0
        }),
        Ce.success("trace collector loaded"),
        e.setState({
            traceMonitorInitEnd: K()
        })
    }
    function jn() {
        const e = H.getInstance();
        e.getState("hasUsertraceInit") && (wn.forEach((e=>document.removeEventListener(e, En, !1))),
        f.forEach((e=>{
            const t = On[e];
            ee(t) === o.FUNC && (window.history[e] = t)
        }
        )),
        l.forEach((e=>window.removeEventListener(e, Sn[e], !1))),
        e.setState({
            hasUsertraceInit: !1
        }),
        Ce.success("trace collector unloaded"))
    }
    function Rn() {
        gr(!0),
        Br(!0),
        Pr(!0),
        Or("actionstat"),
        Or("actiontrack")
    }
    let Nn, _n;
    function Cn(e) {
        if (!e)
            return;
        const t = e.querySelectorAll('script[type="pub-meta"]');
        t && t.forEach(Ln)
    }
    function Ln(e) {
        if (!e)
            return;
        const t = e.getAttribute("pn");
        if (!t)
            return;
        Pn(t);
        const r = e.getAttribute("pv") || ""
          , n = e.getAttribute("ps") || "";
        $[t] = {
            pn: t,
            pv: r,
            ps: n
        }
    }
    let Mn, Un = !1;
    function Bn() {
        return R(this, void 0, void 0, (function*() {
            const e = Xe.getSubAppsQueue()
              , t = e.list();
            if (t.length) {
                const r = wr.getInstance().getOptions();
                Jt(r.performanceApiUrl, Ir({
                    subApps: t,
                    resource: [],
                    page: {}
                }, r)),
                e.clear(),
                _n = null
            }
        }
        ))
    }
    function Pn(e, t) {
        t = t || wr.getInstance().getOptions();
        let r = [];
        e && (r = Array.isArray(e) ? e : [e]),
        r.length && (!function(e=[]) {
            const t = Xe.getSubAppsQueue()
              , r = function(e) {
                const t = document.querySelectorAll(`meta[name="${e}"]`)
                  , r = [];
                if (t.length)
                    for (const e of Object.entries(t))
                        if (e && e[1]) {
                            const t = e[1].getAttribute("content");
                            t && r.push(t)
                        }
                return r
            }("feBu")
              , n = Ae();
            [...e, ...r].forEach((e=>{
                e && e !== n && !t.includes(e) && t.push(e)
            }
            ))
        }(r),
        Un && (_n || (_n = Ge(3e4, Bn)),
        _n()))
    }
    !function() {
        let e;
        function t() {
            if (e && (clearTimeout(e),
            e = null),
            window.removeEventListener("load", t, !1),
            Un = !0,
            window.requestIdleCallback) {
                let e = window.requestIdleCallback((()=>{
                    Cn(document),
                    cancelIdleCallback(e),
                    e = null
                }
                ))
            } else {
                let e = setTimeout((()=>{
                    Cn(document),
                    clearTimeout(e),
                    e = null
                }
                ), 1e3)
            }
            Nn || (Nn = new MutationObserver((e=>{
                e && e.forEach && (e.forEach((e=>{
                    e && e.addedNodes && e.addedNodes.forEach && e.addedNodes.forEach((e=>{
                        if (e.hasChildNodes() && Cn(e),
                        ["SCRIPT"].includes(e.nodeName)) {
                            const t = e;
                            t.getAttribute("type") === S && Ln(t)
                        }
                    }
                    ))
                }
                )),
                Nn.observe(document.body, {
                    childList: !0,
                    subtree: !0
                }))
            }
            ))),
            document.addEventListener("visibilitychange", (function() {
                document.hidden && Rn()
            }
            ))
        }
        e = setTimeout(t, 3e4),
        window.addEventListener("load", t, !1)
    }();
    const qn = function() {
        if (window.__G_KTRACKER__)
            return window.__G_KTRACKER__;
        const e = function() {
            const e = V();
            return v.some((t=>e === t))
        }()
          , t = lr.getInstance()
          , r = H.getInstance();
        r.setState({
            pageTimestamp: K(),
            pageLoadStart: K(),
            currentPageUrl: W(),
            currentPageTitle: document.title
        });
        const n = Tr();
        const i = e=>r=>{
            if (ee(r) !== o.FUNC)
                return Ce.error("The listener must be a function");
            const n = e=>r(e.detail);
            return t.on(e, n),
            ()=>{
                t.off(e, n)
            }
        }
        ;
        const a = function() {
            const e = (te() || "").toLocaleLowerCase();
            return A.some((t=>e.includes(t)))
        }();
        return Mn = {
            init: function(e) {
                if ("auto" === e && !n.autoInit)
                    return Ce.warn("You need to start Ktracker with init function manually, because of the autoInit option was turned off.");
                if (r.getState("hasKtrackerInit"))
                    return Ce.warn("ktracker initialzed, please do not initial repeatedly!");
                if (!me(["performance", "addEventListener", "MutationObserver", "XMLHttpRequest"]))
                    return Ce.warn("your browser is too old");
                r.setState({
                    initStart: K()
                });
                const t = wr.getInstance();
                t.getVisitId() || t.setVisitId(z),
                Lr(),
                fn(),
                xn(),
                window.addEventListener("beforeunload", Rn),
                r.setState({
                    hasKtrackerInit: !0,
                    initEnd: K()
                }),
                Ce.primary("Ktracker mounted")
            },
            initException: Lr,
            initPagePerformance: fn,
            initTraceCollector: xn,
            send: we,
            sendError: e ? we : mr,
            sendErrorV2: e ? we : yr,
            sendEvent: a ? we : Ar,
            sendEventV2: a ? we : xr,
            sendAnalyseEvent: a ? we : jr,
            pv: Pn,
            setKtrackerState: function(e) {
                r.setState(e)
            },
            setExcludeException: i(T.error),
            setExcludeApiError: i(T.apiError),
            setExcludeApi: i(T.api),
            uninstall: function() {
                r.getState("hasExceptionInit") && Mr(),
                r.getState("hasPerformanceInit") && dn(),
                r.getState("hasUsertraceInit") && jn()
            },
            uninstallException: Mr,
            uninstallPerformance: dn,
            uninstallTraceCollector: jn,
            userId: G(),
            visitId: z,
            deviceId: ae(),
            pubsub: t,
            generateHunterid: oe,
            checkReportException: function(e) {
                return !!e && ee(e) === o.ERROR && !(!e.name && !e.message || E.includes(e.message) || e.stack && k.includes(e.stack) || I.includes(e.status))
            }
        },
        e || a || Mn.init("auto"),
        Mn
    }()
      , Dn = function() {};
    return window.__G_KTRACKER__ = qn,
    Object.setPrototypeOf(Dn, qn),
    Dn
}();
